{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar PdfJsApi = require('pdfjs-dist');\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\nvar PdfJsApi__namespace = /*#__PURE__*/_interopNamespace(PdfJsApi);\n\nexports.AnnotationType = void 0;\n\n(function (AnnotationType) {\n  AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\n  AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\n  AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\n  AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\n  AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\n  AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\n  AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\n  AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\n  AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\n  AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\n  AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\n  AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\n  AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\n  AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\n  AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\n  AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\n  AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\n})(exports.AnnotationType || (exports.AnnotationType = {}));\n\nexports.LayerRenderStatus = void 0;\n\n(function (LayerRenderStatus) {\n  LayerRenderStatus[LayerRenderStatus[\"PreRender\"] = 0] = \"PreRender\";\n  LayerRenderStatus[LayerRenderStatus[\"DidRender\"] = 1] = \"DidRender\";\n})(exports.LayerRenderStatus || (exports.LayerRenderStatus = {}));\n\nexports.Position = void 0;\n\n(function (Position) {\n  Position[\"TopLeft\"] = \"TOP_LEFT\";\n  Position[\"TopCenter\"] = \"TOP_CENTER\";\n  Position[\"TopRight\"] = \"TOP_RIGHT\";\n  Position[\"RightTop\"] = \"RIGHT_TOP\";\n  Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n  Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n  Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n  Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n  Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n  Position[\"LeftTop\"] = \"LEFT_TOP\";\n  Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n  Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(exports.Position || (exports.Position = {}));\n\nexports.SpecialZoomLevel = void 0;\n\n(function (SpecialZoomLevel) {\n  SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n  SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n  SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(exports.SpecialZoomLevel || (exports.SpecialZoomLevel = {}));\n\nexports.ToggleStatus = void 0;\n\n(function (ToggleStatus) {\n  ToggleStatus[\"Close\"] = \"Close\";\n  ToggleStatus[\"Open\"] = \"Open\";\n  ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(exports.ToggleStatus || (exports.ToggleStatus = {}));\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nexports.TextDirection = void 0;\n\n(function (TextDirection) {\n  TextDirection[\"RightToLeft\"] = \"RTL\";\n  TextDirection[\"LeftToRight\"] = \"LTR\";\n})(exports.TextDirection || (exports.TextDirection = {}));\n\nvar ThemeContext = React__namespace.createContext({\n  currentTheme: 'light',\n  direction: exports.TextDirection.LeftToRight,\n  setCurrentTheme: function () {}\n});\n\nvar classNames = function (classes) {\n  var result = [];\n  Object.keys(classes).forEach(function (clazz) {\n    if (clazz && classes[clazz]) {\n      result.push(clazz);\n    }\n  });\n  return result.join(' ');\n};\n\nvar Button = function (_a) {\n  var children = _a.children,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    className: classNames({\n      'rpv-core__button': true,\n      'rpv-core__button--rtl': isRtl\n    }),\n    type: \"button\",\n    onClick: onClick\n  }, attrs), children);\n};\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React__namespace.useLayoutEffect : React__namespace.useEffect;\n\nvar Menu = function (_a) {\n  var children = _a.children;\n  var containerRef = React__namespace.useRef();\n  var visibleMenuItemsRef = React__namespace.useRef([]);\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n\n  var handleKeyDown = function (e) {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    switch (e.key) {\n      case 'Tab':\n        e.preventDefault();\n        break;\n\n      case 'ArrowDown':\n        e.preventDefault();\n        moveToItem(function (_, currentIndex) {\n          return currentIndex + 1;\n        });\n        break;\n\n      case 'ArrowUp':\n        e.preventDefault();\n        moveToItem(function (_, currentIndex) {\n          return currentIndex - 1;\n        });\n        break;\n\n      case 'End':\n        e.preventDefault();\n        moveToItem(function (items, _) {\n          return items.length - 1;\n        });\n        break;\n\n      case 'Home':\n        e.preventDefault();\n        moveToItem(function (_, __) {\n          return 0;\n        });\n        break;\n    }\n  };\n\n  var moveToItem = function (getNextItem) {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var items = visibleMenuItemsRef.current;\n    var currentIndex = items.findIndex(function (item) {\n      return item.getAttribute('tabindex') === '0';\n    });\n    var targetIndex = Math.min(items.length - 1, Math.max(0, getNextItem(items, currentIndex)));\n\n    if (currentIndex >= 0 && currentIndex <= items.length - 1) {\n      items[currentIndex].setAttribute('tabindex', '-1');\n    }\n\n    items[targetIndex].setAttribute('tabindex', '0');\n    items[targetIndex].focus();\n  };\n\n  var findVisibleItems = function (container) {\n    var visibleItems = [];\n    container.querySelectorAll('.rpv-core__menu-item[role=\"menuitem\"]').forEach(function (item) {\n      if (item instanceof HTMLElement) {\n        var parent_1 = item.parentElement;\n\n        if (parent_1 === container) {\n          visibleItems.push(item);\n        } else {\n          if (window.getComputedStyle(parent_1).display !== 'none') {\n            visibleItems.push(item);\n          }\n        }\n      }\n    });\n    return visibleItems;\n  };\n\n  useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var visibleItems = findVisibleItems(container);\n    visibleMenuItemsRef.current = visibleItems;\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    document.addEventListener('keydown', handleKeyDown);\n    return function () {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    \"aria-orientation\": \"vertical\",\n    className: classNames({\n      'rpv-core__menu': true,\n      'rpv-core__menu--rtl': isRtl\n    }),\n    role: \"menu\",\n    tabIndex: 0\n  }, children);\n};\n\nvar MenuDivider = function () {\n  return React__namespace.createElement(\"div\", {\n    \"aria-orientation\": \"horizontal\",\n    className: \"rpv-core__menu-divider\",\n    role: \"separator\"\n  });\n};\n\nvar Icon = function (_a) {\n  var children = _a.children,\n      _b = _a.ignoreDirection,\n      ignoreDirection = _b === void 0 ? false : _b,\n      _c = _a.size,\n      size = _c === void 0 ? 24 : _c;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = !ignoreDirection && direction === exports.TextDirection.RightToLeft;\n  var width = \"\".concat(size || 24, \"px\");\n  return React__namespace.createElement(\"svg\", {\n    \"aria-hidden\": \"true\",\n    className: classNames({\n      'rpv-core__icon': true,\n      'rpv-core__icon--rtl': isRtl\n    }),\n    focusable: \"false\",\n    height: width,\n    viewBox: \"0 0 24 24\",\n    width: width\n  }, children);\n};\n\nvar CheckIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M23.5,0.499l-16.5,23l-6.5-6.5\"\n  }));\n};\n\nvar MenuItem = function (_a) {\n  var _b = _a.checked,\n      checked = _b === void 0 ? false : _b,\n      children = _a.children,\n      _c = _a.icon,\n      icon = _c === void 0 ? null : _c,\n      _d = _a.isDisabled,\n      isDisabled = _d === void 0 ? false : _d,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    className: classNames({\n      'rpv-core__menu-item': true,\n      'rpv-core__menu-item--disabled': isDisabled,\n      'rpv-core__menu-item--ltr': !isRtl,\n      'rpv-core__menu-item--rtl': isRtl\n    }),\n    role: \"menuitem\",\n    tabIndex: -1,\n    type: \"button\",\n    onClick: onClick\n  }, attrs), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__menu-item-icon': true,\n      'rpv-core__menu-item-icon--ltr': !isRtl,\n      'rpv-core__menu-item-icon--rtl': isRtl\n    })\n  }, icon), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__menu-item-label': true,\n      'rpv-core__menu-item-label--ltr': !isRtl,\n      'rpv-core__menu-item-label--rtl': isRtl\n    })\n  }, children), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__menu-item-check': true,\n      'rpv-core__menu-item-check--ltr': !isRtl,\n      'rpv-core__menu-item-check--rtl': isRtl\n    })\n  }, checked && React__namespace.createElement(CheckIcon, null)));\n};\n\nvar MinimalButton = function (_a) {\n  var _b = _a.ariaLabel,\n      ariaLabel = _b === void 0 ? '' : _b,\n      _c = _a.ariaKeyShortcuts,\n      ariaKeyShortcuts = _c === void 0 ? '' : _c,\n      children = _a.children,\n      _d = _a.isDisabled,\n      isDisabled = _d === void 0 ? false : _d,\n      _e = _a.isSelected,\n      isSelected = _e === void 0 ? false : _e,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    \"aria-label\": ariaLabel\n  }, ariaKeyShortcuts && {\n    'aria-keyshortcuts': ariaKeyShortcuts\n  }, isDisabled && {\n    'aria-disabled': true\n  }, {\n    className: classNames({\n      'rpv-core__minimal-button': true,\n      'rpv-core__minimal-button--disabled': isDisabled,\n      'rpv-core__minimal-button--rtl': isRtl,\n      'rpv-core__minimal-button--selected': isSelected\n    }),\n    type: \"button\",\n    onClick: onClick\n  }, attrs), children);\n};\n\nvar PrimaryButton = function (_a) {\n  var children = _a.children,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    className: classNames({\n      'rpv-core__primary-button': true,\n      'rpv-core__primary-button--rtl': isRtl\n    }),\n    type: \"button\",\n    onClick: onClick\n  }, attrs), children);\n};\n\nvar ProgressBar = function (_a) {\n  var progress = _a.progress;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  return React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__progress-bar': true,\n      'rpv-core__progress-bar--rtl': isRtl\n    })\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__progress-bar-progress\",\n    style: {\n      width: \"\".concat(progress, \"%\")\n    }\n  }, progress, \"%\"));\n};\n\nvar Separator = function () {\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__separator\"\n  });\n};\n\nvar useIntersectionObserver = function (props) {\n  var containerRef = React__namespace.useRef(null);\n  var threshold = props.threshold,\n      onVisibilityChanged = props.onVisibilityChanged;\n  useIsomorphicLayoutEffect(function () {\n    var io = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        var isVisible = entry.isIntersecting;\n        var ratio = entry.intersectionRatio;\n        onVisibilityChanged({\n          isVisible: isVisible,\n          ratio: ratio\n        });\n      });\n    }, {\n      threshold: threshold || 0\n    });\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    io.observe(container);\n    return function () {\n      io.unobserve(container);\n    };\n  }, []);\n  return containerRef;\n};\n\nvar Spinner = function (_a) {\n  var _b = _a.size,\n      size = _b === void 0 ? '4rem' : _b;\n\n  var _c = React__namespace.useState(false),\n      visible = _c[0],\n      setVisible = _c[1];\n\n  var handleVisibilityChanged = function (params) {\n    setVisible(params.isVisible);\n  };\n\n  var containerRef = useIntersectionObserver({\n    onVisibilityChanged: handleVisibilityChanged\n  });\n  return React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__spinner': true,\n      'rpv-core__spinner--animating': visible\n    }),\n    ref: containerRef,\n    style: {\n      height: size,\n      width: size\n    }\n  });\n};\n\nvar Splitter = function (_a) {\n  var constrain = _a.constrain;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var resizerRef = React__namespace.useRef();\n  var leftSideRef = React__namespace.useRef();\n  var rightSideRef = React__namespace.useRef();\n  var xRef = React__namespace.useRef(0);\n  var yRef = React__namespace.useRef(0);\n  var leftWidthRef = React__namespace.useRef(0);\n  var resizerWidthRef = React__namespace.useRef(0);\n  var eventOptions = {\n    capture: true\n  };\n\n  var handleMouseMove = function (e) {\n    var resizerEle = resizerRef.current;\n    var leftSide = leftSideRef.current;\n    var rightSide = rightSideRef.current;\n\n    if (!resizerEle || !leftSide || !rightSide) {\n      return;\n    }\n\n    var resizerWidth = resizerWidthRef.current;\n    var dx = e.clientX - xRef.current;\n    var firstHalfSize = leftWidthRef.current + (isRtl ? -dx : dx);\n    var containerWidth = resizerEle.parentElement.getBoundingClientRect().width;\n    var firstHalfPercentage = firstHalfSize * 100 / containerWidth;\n    resizerEle.classList.add('rpv-core__splitter--resizing');\n\n    if (constrain) {\n      var secondHalfSize = containerWidth - firstHalfSize - resizerWidth;\n      var secondHalfPercentage = secondHalfSize * 100 / containerWidth;\n\n      if (!constrain({\n        firstHalfPercentage: firstHalfPercentage,\n        firstHalfSize: firstHalfSize,\n        secondHalfPercentage: secondHalfPercentage,\n        secondHalfSize: secondHalfSize\n      })) {\n        return;\n      }\n    }\n\n    leftSide.style.width = \"\".concat(firstHalfPercentage, \"%\");\n    document.body.classList.add('rpv-core__splitter-body--resizing');\n    leftSide.classList.add('rpv-core__splitter-sibling--resizing');\n    rightSide.classList.add('rpv-core__splitter-sibling--resizing');\n  };\n\n  var handleMouseUp = function (e) {\n    var resizerEle = resizerRef.current;\n    var leftSide = leftSideRef.current;\n    var rightSide = rightSideRef.current;\n\n    if (!resizerEle || !leftSide || !rightSide) {\n      return;\n    }\n\n    document.body.classList.remove('rpv-core__splitter-body--resizing');\n    resizerEle.classList.remove('rpv-core__splitter--resizing');\n    leftSide.classList.remove('rpv-core__splitter-sibling--resizing');\n    rightSide.classList.remove('rpv-core__splitter-sibling--resizing');\n    document.removeEventListener('mousemove', handleMouseMove, eventOptions);\n    document.removeEventListener('mouseup', handleMouseUp, eventOptions);\n  };\n\n  var handleMouseDown = function (e) {\n    var leftSide = leftSideRef.current;\n\n    if (!leftSide) {\n      return;\n    }\n\n    xRef.current = e.clientX;\n    yRef.current = e.clientY;\n    leftWidthRef.current = leftSide.getBoundingClientRect().width;\n    document.addEventListener('mousemove', handleMouseMove, eventOptions);\n    document.addEventListener('mouseup', handleMouseUp, eventOptions);\n  };\n\n  React__namespace.useEffect(function () {\n    var resizerEle = resizerRef.current;\n\n    if (!resizerEle) {\n      return;\n    }\n\n    resizerWidthRef.current = resizerEle.getBoundingClientRect().width;\n    leftSideRef.current = resizerEle.previousElementSibling;\n    rightSideRef.current = resizerEle.nextElementSibling;\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: resizerRef,\n    className: \"rpv-core__splitter\",\n    onMouseDown: handleMouseDown\n  });\n};\n\nvar TextBox = function (_a) {\n  var _b = _a.ariaLabel,\n      ariaLabel = _b === void 0 ? '' : _b,\n      _c = _a.autoFocus,\n      autoFocus = _c === void 0 ? false : _c,\n      _d = _a.placeholder,\n      placeholder = _d === void 0 ? '' : _d,\n      testId = _a.testId,\n      _e = _a.type,\n      type = _e === void 0 ? 'text' : _e,\n      _f = _a.value,\n      value = _f === void 0 ? '' : _f,\n      onChange = _a.onChange,\n      _g = _a.onKeyDown,\n      onKeyDown = _g === void 0 ? function () {} : _g;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var textboxRef = React__namespace.useRef();\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = {\n    ref: textboxRef,\n    'data-testid': '',\n    'aria-label': ariaLabel,\n    className: classNames({\n      'rpv-core__textbox': true,\n      'rpv-core__textbox--rtl': isRtl\n    }),\n    placeholder: placeholder,\n    value: value,\n    onChange: function (e) {\n      return onChange(e.target.value);\n    },\n    onKeyDown: onKeyDown\n  };\n\n  if (testId) {\n    attrs['data-testid'] = testId;\n  }\n\n  useIsomorphicLayoutEffect(function () {\n    if (autoFocus) {\n      var textboxEle = textboxRef.current;\n\n      if (textboxEle) {\n        var x = window.scrollX;\n        var y = window.scrollY;\n        textboxEle.focus();\n        window.scrollTo(x, y);\n      }\n    }\n  }, []);\n  return type === 'text' ? React__namespace.createElement(\"input\", __assign({\n    type: \"text\"\n  }, attrs)) : React__namespace.createElement(\"input\", __assign({\n    type: \"password\"\n  }, attrs));\n};\n\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\n  var clickHandler = function (e) {\n    var target = targetRef.current;\n\n    if (target && !target.contains(e.target)) {\n      onClickOutside();\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    if (!closeOnClickOutside) {\n      return;\n    }\n\n    var eventOptions = {\n      capture: true\n    };\n    document.addEventListener('click', clickHandler, eventOptions);\n    return function () {\n      document.removeEventListener('click', clickHandler, eventOptions);\n    };\n  }, []);\n};\n\nvar useEscape = function (handler) {\n  var keyUpHandler = function (e) {\n    if (e.key === 'Escape') {\n      handler();\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    document.addEventListener('keyup', keyUpHandler);\n    return function () {\n      document.removeEventListener('keyup', keyUpHandler);\n    };\n  }, []);\n};\n\nvar useLockScroll = function () {\n  React__namespace.useEffect(function () {\n    var originalStyle = window.getComputedStyle(document.body).overflow;\n    document.body.style.overflow = 'hidden';\n    return function () {\n      document.body.style.overflow = originalStyle;\n    };\n  }, []);\n};\n\nvar ModalBody = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      onToggle = _a.onToggle;\n  var contentRef = React__namespace.useRef();\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  useLockScroll();\n  useEscape(function () {\n    if (contentRef.current && closeOnEscape) {\n      onToggle();\n    }\n  });\n  useClickOutside(closeOnClickOutside, contentRef, onToggle);\n  useIsomorphicLayoutEffect(function () {\n    var contentEle = contentRef.current;\n\n    if (!contentEle) {\n      return;\n    }\n\n    var maxHeight = document.body.clientHeight * 0.75;\n\n    if (contentEle.getBoundingClientRect().height >= maxHeight) {\n      contentEle.style.overflow = 'auto';\n      contentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n    }\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    \"aria-modal\": \"true\",\n    className: classNames({\n      'rpv-core__modal-body': true,\n      'rpv-core__modal-body--rtl': isRtl\n    }),\n    id: \"rpv-core__modal-body-\".concat(ariaControlsSuffix),\n    ref: contentRef,\n    role: \"dialog\",\n    tabIndex: -1\n  }, children);\n};\n\nvar ModalOverlay = function (_a) {\n  var children = _a.children;\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__modal-overlay\"\n  }, children);\n};\n\nvar useToggle = function (isOpened) {\n  var _a = React__namespace.useState(isOpened),\n      opened = _a[0],\n      setOpened = _a[1];\n\n  var toggle = function (status) {\n    switch (status) {\n      case exports.ToggleStatus.Close:\n        setOpened(false);\n        break;\n\n      case exports.ToggleStatus.Open:\n        setOpened(true);\n        break;\n\n      case exports.ToggleStatus.Toggle:\n      default:\n        setOpened(function (isOpened) {\n          return !isOpened;\n        });\n        break;\n    }\n  };\n\n  return {\n    opened: opened,\n    toggle: toggle\n  };\n};\n\nvar Portal = function (_a) {\n  var content = _a.content,\n      _b = _a.isOpened,\n      isOpened = _b === void 0 ? false : _b,\n      target = _a.target;\n\n  var _c = useToggle(isOpened),\n      opened = _c.opened,\n      toggle = _c.toggle;\n\n  return React__namespace.createElement(React__namespace.Fragment, null, target && target(toggle, opened), opened && content(toggle));\n};\n\nvar id = 0;\n\nvar uniqueId = function () {\n  return id++;\n};\n\nvar Modal = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      _b = _a.isOpened,\n      isOpened = _b === void 0 ? false : _b,\n      target = _a.target;\n  var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\n\n  var renderTarget = function (toggle, opened) {\n    return React__namespace.createElement(\"div\", {\n      \"aria-expanded\": opened ? 'true' : 'false',\n      \"aria-haspopup\": \"dialog\",\n      \"aria-controls\": \"rpv-core__modal-body-\".concat(controlsSuffix)\n    }, target(toggle, opened));\n  };\n\n  var renderContent = function (toggle) {\n    return React__namespace.createElement(ModalOverlay, null, React__namespace.createElement(ModalBody, {\n      ariaControlsSuffix: controlsSuffix,\n      closeOnClickOutside: closeOnClickOutside,\n      closeOnEscape: closeOnEscape,\n      onToggle: toggle\n    }, content(toggle)));\n  };\n\n  return React__namespace.createElement(Portal, {\n    target: target ? renderTarget : null,\n    content: renderContent,\n    isOpened: isOpened\n  });\n};\n\nvar calculatePosition = function (content, target, position, offset) {\n  var targetRect = target.getBoundingClientRect();\n  var contentRect = content.getBoundingClientRect();\n  var height = contentRect.height,\n      width = contentRect.width;\n  var top = 0;\n  var left = 0;\n\n  switch (position) {\n    case exports.Position.TopLeft:\n      top = targetRect.top - height;\n      left = targetRect.left;\n      break;\n\n    case exports.Position.TopCenter:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case exports.Position.TopRight:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case exports.Position.RightTop:\n      top = targetRect.top;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case exports.Position.RightCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case exports.Position.RightBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case exports.Position.BottomLeft:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left;\n      break;\n\n    case exports.Position.BottomCenter:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case exports.Position.BottomRight:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case exports.Position.LeftTop:\n      top = targetRect.top;\n      left = targetRect.left - width;\n      break;\n\n    case exports.Position.LeftCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left - width;\n      break;\n\n    case exports.Position.LeftBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left - width;\n      break;\n  }\n\n  return {\n    left: left + (offset.left || 0),\n    top: top + (offset.top || 0)\n  };\n};\n\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\n  useIsomorphicLayoutEffect(function () {\n    var targetEle = targetRef.current;\n    var contentEle = contentRef.current;\n    var anchorEle = anchorRef.current;\n\n    if (!contentEle || !targetEle || !anchorEle) {\n      return;\n    }\n\n    var anchorRect = anchorEle.getBoundingClientRect();\n\n    var _a = calculatePosition(contentEle, targetEle, position, offset),\n        top = _a.top,\n        left = _a.left;\n\n    contentEle.style.top = \"\".concat(top - anchorRect.top, \"px\");\n    contentEle.style.left = \"\".concat(left - anchorRect.left, \"px\");\n  }, []);\n};\n\nvar Arrow = function (_a) {\n  var _b;\n\n  var customClassName = _a.customClassName,\n      position = _a.position;\n  return React__namespace.createElement(\"div\", {\n    className: classNames((_b = {\n      'rpv-core__arrow': true,\n      'rpv-core__arrow--tl': position === exports.Position.TopLeft,\n      'rpv-core__arrow--tc': position === exports.Position.TopCenter,\n      'rpv-core__arrow--tr': position === exports.Position.TopRight,\n      'rpv-core__arrow--rt': position === exports.Position.RightTop,\n      'rpv-core__arrow--rc': position === exports.Position.RightCenter,\n      'rpv-core__arrow--rb': position === exports.Position.RightBottom,\n      'rpv-core__arrow--bl': position === exports.Position.BottomLeft,\n      'rpv-core__arrow--bc': position === exports.Position.BottomCenter,\n      'rpv-core__arrow--br': position === exports.Position.BottomRight,\n      'rpv-core__arrow--lt': position === exports.Position.LeftTop,\n      'rpv-core__arrow--lc': position === exports.Position.LeftCenter,\n      'rpv-core__arrow--lb': position === exports.Position.LeftBottom\n    }, _b[\"\".concat(customClassName)] = customClassName !== '', _b))\n  });\n};\n\nvar PopoverBody = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef,\n      onClose = _a.onClose;\n  var contentRef = React__namespace.useRef();\n  var innerRef = React__namespace.useRef();\n  var anchorRef = React__namespace.useRef();\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  useClickOutside(closeOnClickOutside, contentRef, onClose);\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  useIsomorphicLayoutEffect(function () {\n    var innerContentEle = innerRef.current;\n\n    if (!innerContentEle) {\n      return;\n    }\n\n    var maxHeight = document.body.clientHeight * 0.75;\n\n    if (innerContentEle.getBoundingClientRect().height >= maxHeight) {\n      innerContentEle.style.overflow = 'auto';\n      innerContentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n    }\n  }, []);\n  var innerId = \"rpv-core__popover-body-inner-\".concat(ariaControlsSuffix);\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__namespace.createElement(\"div\", {\n    \"aria-describedby\": innerId,\n    className: classNames({\n      'rpv-core__popover-body': true,\n      'rpv-core__popover-body--rtl': isRtl\n    }),\n    id: \"rpv-core__popover-body-\".concat(ariaControlsSuffix),\n    ref: contentRef,\n    role: \"dialog\",\n    tabIndex: -1\n  }, React__namespace.createElement(Arrow, {\n    customClassName: \"rpv-core__popover-body-arrow\",\n    position: position\n  }), React__namespace.createElement(\"div\", {\n    id: innerId,\n    ref: innerRef\n  }, children)));\n};\n\nvar PopoverOverlay = function (_a) {\n  var closeOnEscape = _a.closeOnEscape,\n      onClose = _a.onClose;\n  var containerRef = React__namespace.useRef();\n  useEscape(function () {\n    if (containerRef.current && closeOnEscape) {\n      onClose();\n    }\n  });\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__popover-overlay\",\n    ref: containerRef\n  });\n};\n\nvar Popover = function (_a) {\n  var _b = _a.ariaHasPopup,\n      ariaHasPopup = _b === void 0 ? 'dialog' : _b,\n      ariaControlsSuffix = _a.ariaControlsSuffix,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n\n  var _c = useToggle(false),\n      opened = _c.opened,\n      toggle = _c.toggle;\n\n  var targetRef = React__namespace.useRef();\n  var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\n  return React__namespace.createElement(\"div\", {\n    ref: targetRef,\n    \"aria-expanded\": opened ? 'true' : 'false',\n    \"aria-haspopup\": ariaHasPopup,\n    \"aria-controls\": \"rpv-core__popver-body-\".concat(controlsSuffix)\n  }, target(toggle, opened), opened && React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(PopoverOverlay, {\n    closeOnEscape: closeOnEscape,\n    onClose: toggle\n  }), React__namespace.createElement(PopoverBody, {\n    ariaControlsSuffix: controlsSuffix,\n    closeOnClickOutside: closeOnClickOutside,\n    offset: offset,\n    position: position,\n    targetRef: targetRef,\n    onClose: toggle\n  }, content(toggle))));\n};\n\nvar TooltipBody = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      children = _a.children,\n      contentRef = _a.contentRef,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef;\n  var anchorRef = React__namespace.useRef();\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__tooltip-body': true,\n      'rpv-core__tooltip-body--rtl': isRtl\n    }),\n    id: \"rpv-core__tooltip-body-\".concat(ariaControlsSuffix),\n    ref: contentRef,\n    role: \"tooltip\"\n  }, React__namespace.createElement(Arrow, {\n    customClassName: \"rpv-core__tooltip-body-arrow\",\n    position: position\n  }), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__tooltip-body-content\"\n  }, children)));\n};\n\nvar Tooltip = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      content = _a.content,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n\n  var _b = useToggle(false),\n      opened = _b.opened,\n      toggle = _b.toggle;\n\n  var targetRef = React__namespace.useRef();\n  var contentRef = React__namespace.useRef();\n  var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\n  useEscape(function () {\n    if (targetRef.current && document.activeElement && targetRef.current.contains(document.activeElement)) {\n      close();\n    }\n  });\n\n  var open = function () {\n    toggle(exports.ToggleStatus.Open);\n  };\n\n  var close = function () {\n    toggle(exports.ToggleStatus.Close);\n  };\n\n  var onBlur = function (e) {\n    var shouldHideTooltip = e.relatedTarget instanceof HTMLElement && e.currentTarget.parentElement && e.currentTarget.parentElement.contains(e.relatedTarget);\n\n    if (shouldHideTooltip) {\n      if (contentRef.current) {\n        contentRef.current.style.display = 'none';\n      }\n    } else {\n      close();\n    }\n  };\n\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: targetRef,\n    \"aria-describedby\": \"rpv-core__tooltip-body-\".concat(controlsSuffix),\n    onBlur: onBlur,\n    onFocus: open,\n    onMouseEnter: open,\n    onMouseLeave: close\n  }, target), opened && React__namespace.createElement(TooltipBody, {\n    ariaControlsSuffix: controlsSuffix,\n    contentRef: contentRef,\n    offset: offset,\n    position: position,\n    targetRef: targetRef\n  }, content()));\n};\n\nfunction createStore(initialState) {\n  var state = initialState || {};\n  var listeners = {};\n  return {\n    subscribe: function (key, handler) {\n      listeners[key] = (listeners[key] || []).concat(handler);\n    },\n    unsubscribe: function (key, handler) {\n      listeners[key] = (listeners[key] || []).filter(function (f) {\n        return f !== handler;\n      });\n    },\n    update: function (key, data) {\n      var _a;\n\n      state = __assign(__assign({}, state), (_a = {}, _a[key] = data, _a));\n      (listeners[key] || []).forEach(function (handler) {\n        return handler(state[key]);\n      });\n    },\n    get: function (key) {\n      return state[key];\n    }\n  };\n}\n\nvar core = {\n  askingPassword: {\n    requirePasswordToOpen: \"This document requires a password to open\",\n    submit: \"Submit\"\n  },\n  wrongPassword: {\n    tryAgain: \"The password is wrong. Please try again\"\n  },\n  pageLabel: \"Page {{pageIndex}}\"\n};\nvar enUs = {\n  core: core\n};\nvar DefaultLocalization = enUs;\nvar LocalizationContext = React__namespace.createContext({\n  l10n: DefaultLocalization,\n  setL10n: function () {}\n});\n\nfunction usePrevious(value) {\n  var ref = React__namespace.useRef(value);\n  React__namespace.useEffect(function () {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n\nvar useTrackResize = function (_a) {\n  var targetRef = _a.targetRef,\n      onResize = _a.onResize;\n  useIsomorphicLayoutEffect(function () {\n    var io = new ResizeObserver(function (entries) {\n      entries.forEach(function (entry) {\n        onResize(entry.target);\n      });\n    });\n    var container = targetRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    io.observe(container);\n    return function () {\n      io.unobserve(container);\n    };\n  }, []);\n};\n\nvar AnnotationBorderStyleType;\n\n(function (AnnotationBorderStyleType) {\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\n\nvar dateRegex = new RegExp('^D:' + '(\\\\d{4})' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '([Z|+|-])?' + '(\\\\d{2})?' + \"'?\" + '(\\\\d{2})?' + \"'?\");\n\nvar parse = function (value, min, max, defaultValue) {\n  var parsed = parseInt(value, 10);\n  return parsed >= min && parsed <= max ? parsed : defaultValue;\n};\n\nvar convertDate = function (input) {\n  var matches = dateRegex.exec(input);\n\n  if (!matches) {\n    return null;\n  }\n\n  var year = parseInt(matches[1], 10);\n  var month = parse(matches[2], 1, 12, 1) - 1;\n  var day = parse(matches[3], 1, 31, 1);\n  var hour = parse(matches[4], 0, 23, 0);\n  var minute = parse(matches[5], 0, 59, 0);\n  var second = parse(matches[6], 0, 59, 0);\n  var universalTimeRelation = matches[7] || 'Z';\n  var offsetHour = parse(matches[8], 0, 23, 0);\n  var offsetMinute = parse(matches[9], 0, 59, 0);\n\n  switch (universalTimeRelation) {\n    case '-':\n      hour += offsetHour;\n      minute += offsetMinute;\n      break;\n\n    case '+':\n      hour -= offsetHour;\n      minute -= offsetMinute;\n      break;\n  }\n\n  return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar PopupWrapper = function (_a) {\n  var annotation = _a.annotation;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var containerRef = React__namespace.useRef();\n  var dateStr = '';\n\n  if (annotation.modificationDate) {\n    var date = convertDate(annotation.modificationDate);\n    dateStr = date ? \"\".concat(date.toLocaleDateString(), \", \").concat(date.toLocaleTimeString()) : '';\n  }\n\n  React__namespace.useLayoutEffect(function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var annotationEle = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n\n    if (!annotationEle) {\n      return;\n    }\n\n    var ele = annotationEle;\n    ele.style.zIndex += 1;\n    return function () {\n      ele.style.zIndex = \"\".concat(parseInt(ele.style.zIndex, 10) - 1);\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: classNames({\n      'rpv-core__annotation-popup-wrapper': true,\n      'rpv-core__annotation-popup-wrapper--rtl': isRtl\n    }),\n    style: {\n      top: annotation.annotationType === exports.AnnotationType.Popup ? '' : '100%'\n    }\n  }, annotation.title && React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__annotation-popup-title': true,\n      'rpv-core__annotation-popup-title--ltr': !isRtl,\n      'rpv-core__annotation-popup-title--rtl': isRtl\n    })\n  }, annotation.title), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__annotation-popup-date\"\n  }, dateStr)), annotation.contents && React__namespace.createElement(\"div\", {\n    className: \"rpv-core__annotation-popup-content\"\n  }, annotation.contents.split('\\n').map(function (item, index) {\n    return React__namespace.createElement(React__namespace.Fragment, {\n      key: index\n    }, item, React__namespace.createElement(\"br\", null));\n  })));\n};\n\nvar TogglePopupBy;\n\n(function (TogglePopupBy) {\n  TogglePopupBy[\"Click\"] = \"Click\";\n  TogglePopupBy[\"Hover\"] = \"Hover\";\n})(TogglePopupBy || (TogglePopupBy = {}));\n\nvar useTogglePopup = function () {\n  var _a = useToggle(false),\n      opened = _a.opened,\n      toggle = _a.toggle;\n\n  var _b = React__namespace.useState(TogglePopupBy.Hover),\n      togglePopupBy = _b[0],\n      setTooglePopupBy = _b[1];\n\n  var toggleOnClick = function () {\n    switch (togglePopupBy) {\n      case TogglePopupBy.Click:\n        opened && setTooglePopupBy(TogglePopupBy.Hover);\n        toggle(exports.ToggleStatus.Toggle);\n        break;\n\n      case TogglePopupBy.Hover:\n        setTooglePopupBy(TogglePopupBy.Click);\n        toggle(exports.ToggleStatus.Open);\n        break;\n    }\n  };\n\n  var openOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Open);\n  };\n\n  var closeOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Close);\n  };\n\n  return {\n    opened: opened,\n    closeOnHover: closeOnHover,\n    openOnHover: openOnHover,\n    toggleOnClick: toggleOnClick\n  };\n};\n\nvar Annotation = function (_a) {\n  var annotation = _a.annotation,\n      children = _a.children,\n      ignoreBorder = _a.ignoreBorder,\n      hasPopup = _a.hasPopup,\n      isRenderable = _a.isRenderable,\n      page = _a.page,\n      viewport = _a.viewport;\n  var rect = annotation.rect;\n\n  var _b = useTogglePopup(),\n      closeOnHover = _b.closeOnHover,\n      opened = _b.opened,\n      openOnHover = _b.openOnHover,\n      toggleOnClick = _b.toggleOnClick;\n\n  var normalizeRect = function (r) {\n    return [Math.min(r[0], r[2]), Math.min(r[1], r[3]), Math.max(r[0], r[2]), Math.max(r[1], r[3])];\n  };\n\n  var bound = normalizeRect([rect[0], page.view[3] + page.view[1] - rect[1], rect[2], page.view[3] + page.view[1] - rect[3]]);\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var styles = {\n    borderColor: '',\n    borderRadius: '',\n    borderStyle: '',\n    borderWidth: ''\n  };\n\n  if (!ignoreBorder && annotation.borderStyle.width > 0) {\n    switch (annotation.borderStyle.style) {\n      case AnnotationBorderStyleType.Dashed:\n        styles.borderStyle = 'dashed';\n        break;\n\n      case AnnotationBorderStyleType.Solid:\n        styles.borderStyle = 'solid';\n        break;\n\n      case AnnotationBorderStyleType.Underline:\n        styles = Object.assign({\n          borderBottomStyle: 'solid'\n        }, styles);\n        break;\n\n      case AnnotationBorderStyleType.Beveled:\n      case AnnotationBorderStyleType.Inset:\n    }\n\n    var borderWidth = annotation.borderStyle.width;\n    styles.borderWidth = \"\".concat(borderWidth, \"px\");\n\n    if (annotation.borderStyle.style !== AnnotationBorderStyleType.Underline) {\n      width = width - 2 * borderWidth;\n      height = height - 2 * borderWidth;\n    }\n\n    var _c = annotation.borderStyle,\n        horizontalCornerRadius = _c.horizontalCornerRadius,\n        verticalCornerRadius = _c.verticalCornerRadius;\n\n    if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\n      styles.borderRadius = \"\".concat(horizontalCornerRadius, \"px / \").concat(verticalCornerRadius, \"px\");\n    }\n\n    annotation.color ? styles.borderColor = \"rgb(\".concat(annotation.color[0] | 0, \", \").concat(annotation.color[1] | 0, \", \").concat(annotation.color[2] | 0, \")\") : styles.borderWidth = '0';\n  }\n\n  return React__namespace.createElement(React__namespace.Fragment, null, isRenderable && children({\n    popup: {\n      opened: opened,\n      closeOnHover: closeOnHover,\n      openOnHover: openOnHover,\n      toggleOnClick: toggleOnClick\n    },\n    slot: {\n      attrs: {\n        style: Object.assign({\n          height: \"\".concat(height, \"px\"),\n          left: \"\".concat(bound[0], \"px\"),\n          top: \"\".concat(bound[1], \"px\"),\n          transform: \"matrix(\".concat(viewport.transform.join(','), \")\"),\n          transformOrigin: \"-\".concat(bound[0], \"px -\").concat(bound[1], \"px\"),\n          width: \"\".concat(width, \"px\")\n        }, styles)\n      },\n      children: React__namespace.createElement(React__namespace.Fragment, null, hasPopup && opened && React__namespace.createElement(PopupWrapper, {\n        annotation: annotation\n      }))\n    }\n  }));\n};\n\nvar Caret = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--caret\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Circle = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--circle\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"circle\", {\n      cy: height / 2,\n      fill: \"none\",\n      rx: width / 2 - borderWidth / 2,\n      ry: height / 2 - borderWidth / 2,\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1\n    })), props.slot.children);\n  });\n};\n\nvar getFileName = function (url) {\n  var str = url.split('/').pop();\n  return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n  var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], {\n    type: ''\n  }));\n  var link = document.createElement('a');\n  link.style.display = 'none';\n  link.href = blobUrl || url;\n  link.setAttribute('download', getFileName(url));\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n\n  if (blobUrl) {\n    URL.revokeObjectURL(blobUrl);\n  }\n};\n\nvar FileAttachment = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false && (!!annotation.title || !!annotation.contents);\n\n  var doubleClick = function () {\n    var file = annotation.file;\n    file && downloadFile(file.filename, file.content);\n  };\n\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: true,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--file-attachment\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onDoubleClick: doubleClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar FreeText = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--free-text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Popup = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var isRenderable = !!(annotation.title || annotation.contents);\n  var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\n  var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\n  useIsomorphicLayoutEffect(function () {\n    if (!annotation.parentId) {\n      return;\n    }\n\n    var parent = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.parentId, \"\\\"]\"));\n    var container = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n\n    if (!parent || !container) {\n      return;\n    }\n\n    var left = parseFloat(parent.style.left);\n    var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\n    container.style.left = \"\".concat(left, \"px\");\n    container.style.top = \"\".concat(top, \"px\");\n    container.style.transformOrigin = \"-\".concat(left, \"px -\").concat(top, \"px\");\n  }, []);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--popup\",\n      \"data-annotation-id\": annotation.id\n    }), React__namespace.createElement(PopupWrapper, {\n      annotation: annotation\n    }));\n  });\n};\n\nvar Highlight = function (_a) {\n  var annotation = _a.annotation,\n      childAnnotation = _a.childAnnotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var hasQuadPoints = annotation.quadPoints && annotation.quadPoints.length > 0;\n\n  if (hasQuadPoints) {\n    var annotations = annotation.quadPoints.map(function (quadPoint) {\n      return Object.assign({}, annotation, {\n        rect: [quadPoint[2].x, quadPoint[2].y, quadPoint[1].x, quadPoint[1].y],\n        quadPoints: []\n      });\n    });\n    return React__namespace.createElement(React__namespace.Fragment, null, annotations.map(function (ann, index) {\n      return React__namespace.createElement(Highlight, {\n        key: index,\n        annotation: ann,\n        childAnnotation: childAnnotation,\n        page: page,\n        viewport: viewport\n      });\n    }));\n  }\n\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--highlight\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children), childAnnotation && childAnnotation.annotationType === exports.AnnotationType.Popup && props.popup.opened && React__namespace.createElement(Popup, {\n      annotation: childAnnotation,\n      page: page,\n      viewport: viewport\n    }));\n  });\n};\n\nvar Ink = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--ink\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.inkLists && annotation.inkLists.length && React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, annotation.inkLists.map(function (inkList, index) {\n      return React__namespace.createElement(\"polyline\", {\n        key: index,\n        fill: \"none\",\n        stroke: \"transparent\",\n        strokeWidth: borderWidth || 1,\n        points: inkList.map(function (item) {\n          return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y);\n        }).join(' ')\n      });\n    })), props.slot.children);\n  });\n};\n\nvar Line = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--line\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"line\", {\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      x1: rect[2] - annotation.lineCoordinates[0],\n      x2: rect[2] - annotation.lineCoordinates[2],\n      y1: rect[3] - annotation.lineCoordinates[1],\n      y2: rect[3] - annotation.lineCoordinates[3]\n    })), props.slot.children);\n  });\n};\n\nvar normalizeDestination = function (pageIndex, destArray) {\n  switch (destArray[1].name) {\n    case 'XYZ':\n      return {\n        bottomOffset: destArray[3],\n        leftOffset: destArray[2] || 0,\n        pageIndex: pageIndex,\n        scaleTo: destArray[4]\n      };\n\n    case 'Fit':\n    case 'FitB':\n      return {\n        bottomOffset: 0,\n        leftOffset: 0,\n        pageIndex: pageIndex,\n        scaleTo: exports.SpecialZoomLevel.PageFit\n      };\n\n    case 'FitH':\n    case 'FitBH':\n      return {\n        bottomOffset: destArray[2],\n        leftOffset: 0,\n        pageIndex: pageIndex,\n        scaleTo: exports.SpecialZoomLevel.PageWidth\n      };\n\n    default:\n      return {\n        bottomOffset: 0,\n        leftOffset: 0,\n        pageIndex: pageIndex,\n        scaleTo: 1\n      };\n  }\n};\n\nvar pageOutlinesMap = new Map();\nvar pagesMap = new Map();\n\nvar generateRefKey = function (outline) {\n  return \"\".concat(outline.num, \"R\").concat(outline.gen === 0 ? '' : outline.gen);\n};\n\nvar getPageIndex = function (outline) {\n  return pageOutlinesMap.get(generateRefKey(outline)) || null;\n};\n\nvar cacheOutlineRef = function (outline, pageIndex) {\n  pageOutlinesMap.set(generateRefKey(outline), pageIndex);\n};\n\nvar clearPagesCache = function () {\n  pageOutlinesMap.clear();\n  pagesMap.clear();\n};\n\nvar getPage = function (doc, pageIndex) {\n  if (!doc) {\n    return Promise.reject('The document is not loaded yet');\n  }\n\n  var page = pagesMap.get(pageIndex);\n\n  if (page) {\n    return Promise.resolve(page);\n  }\n\n  return new Promise(function (resolve, _) {\n    doc.getPage(pageIndex + 1).then(function (page) {\n      pagesMap.set(pageIndex, page);\n\n      if (page.ref) {\n        cacheOutlineRef(page.ref, pageIndex);\n      }\n\n      resolve(page);\n    });\n  });\n};\n\nvar getDestination = function (doc, dest) {\n  return new Promise(function (res) {\n    new Promise(function (resolve) {\n      if (typeof dest === 'string') {\n        doc.getDestination(dest).then(function (destArray) {\n          resolve(destArray);\n        });\n      } else {\n        resolve(dest);\n      }\n    }).then(function (destArray) {\n      if ('object' === typeof destArray[0] && destArray[0] !== null) {\n        var outlineRef_1 = destArray[0];\n        var pageIndex = getPageIndex(outlineRef_1);\n\n        if (pageIndex === null) {\n          doc.getPageIndex(outlineRef_1).then(function (pageIndex) {\n            cacheOutlineRef(outlineRef_1, pageIndex);\n            getDestination(doc, dest).then(function (result) {\n              return res(result);\n            });\n          });\n        } else {\n          res(normalizeDestination(pageIndex, destArray));\n        }\n      } else {\n        var target = normalizeDestination(destArray[0], destArray);\n        res(target);\n      }\n    });\n  });\n};\n\nvar Link = function (_a) {\n  var annotation = _a.annotation,\n      doc = _a.doc,\n      page = _a.page,\n      viewport = _a.viewport,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n\n  var link = function (e) {\n    e.preventDefault();\n    annotation.action ? onExecuteNamedAction(annotation.action) : getDestination(doc, annotation.dest).then(function (target) {\n      var pageIndex = target.pageIndex,\n          bottomOffset = target.bottomOffset,\n          leftOffset = target.leftOffset,\n          scaleTo = target.scaleTo;\n      onJumpToDest(pageIndex, bottomOffset, leftOffset, scaleTo);\n    });\n  };\n\n  var isRenderable = !!(annotation.url || annotation.dest || annotation.action);\n  var attrs = annotation.url ? {\n    href: annotation.url,\n    rel: 'noopener noreferrer nofollow',\n    target: annotation.newWindow ? '_blank' : '',\n    title: annotation.url\n  } : {\n    href: '',\n    'data-annotation-link-dest': annotation.dest,\n    onClick: link\n  };\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: false,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--link\",\n      \"data-annotation-id\": annotation.id\n    }), React__namespace.createElement(\"a\", __assign({}, attrs)));\n  });\n};\n\nvar Polygon = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--polygon\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"polygon\", {\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Polyline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--polyline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"polyline\", {\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Square = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--square\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"rect\", {\n      height: height - borderWidth,\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      x: borderWidth / 2,\n      y: borderWidth / 2,\n      width: width - borderWidth\n    })), props.slot.children);\n  });\n};\n\nvar Squiggly = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--squiggly\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Stamp = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--stamp\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar StrikeOut = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--strike-out\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar CommentIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25\"\n  }));\n};\n\nvar HelpIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M21.423 5.406L17.415 9.414\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M14.587 6.585L18.607 2.565\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M5.405 21.424L9.413 17.416\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6.585 14.588L2.577 18.596\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M18.602 21.419L14.595 17.412\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M17.419 14.58L21.428 18.589\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M2.582 5.399L6.588 9.406\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M9.421 6.581L5.412 2.572\"\n  }));\n};\n\nvar KeyIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z\"\n  }));\n};\n\nvar NoteIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6 4.5L6 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M18 4.5L18 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M10 4.5L10 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M14 4.5L14 0.5\"\n  }));\n};\n\nvar ParagraphIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M17.5 0.498L17.5 23.498\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M10.5 0.498L10.5 23.498\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M23.5.5H6.5a6,6,0,0,0,0,12h4\"\n  }));\n};\n\nvar TriangleIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z\"\n  }));\n};\n\nvar Text = function (_a) {\n  var annotation = _a.annotation,\n      childAnnotation = _a.childAnnotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var name = annotation.name ? annotation.name.toLowerCase() : '';\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), name && React__namespace.createElement(\"div\", {\n      className: \"rpv-core__annotation-text-icon\"\n    }, name === 'check' && React__namespace.createElement(CheckIcon, null), name === 'comment' && React__namespace.createElement(CommentIcon, null), name === 'help' && React__namespace.createElement(HelpIcon, null), name === 'insert' && React__namespace.createElement(TriangleIcon, null), name === 'key' && React__namespace.createElement(KeyIcon, null), name === 'note' && React__namespace.createElement(NoteIcon, null), (name === 'newparagraph' || name === 'paragraph') && React__namespace.createElement(ParagraphIcon, null)), props.slot.children), childAnnotation && childAnnotation.annotationType === exports.AnnotationType.Popup && props.popup.opened && React__namespace.createElement(Popup, {\n      annotation: childAnnotation,\n      page: page,\n      viewport: viewport\n    }));\n  });\n};\n\nvar Underline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--underline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar AnnotationLayerBody = function (_a) {\n  var annotations = _a.annotations,\n      containerRef = _a.containerRef,\n      doc = _a.doc,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n  var viewport = page.getViewport({\n    rotation: rotation,\n    scale: scale\n  });\n  var clonedViewPort = viewport.clone({\n    dontFlip: true\n  });\n  var filterAnnotations = annotations.filter(function (annotation) {\n    return !annotation.parentId;\n  });\n  React__namespace.useEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    plugins.forEach(function (plugin) {\n      if (plugin.onAnnotationLayerRender) {\n        plugin.onAnnotationLayerRender({\n          annotations: filterAnnotations,\n          container: container,\n          pageIndex: pageIndex,\n          rotation: rotation,\n          scale: scale\n        });\n      }\n    });\n  }, []);\n  return React__namespace.createElement(React__namespace.Fragment, null, filterAnnotations.map(function (annotation) {\n    var childAnnotation = annotations.find(function (item) {\n      return item.parentId === annotation.id;\n    });\n\n    switch (annotation.annotationType) {\n      case exports.AnnotationType.Caret:\n        return React__namespace.createElement(Caret, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Circle:\n        return React__namespace.createElement(Circle, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.FileAttachment:\n        return React__namespace.createElement(FileAttachment, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.FreeText:\n        return React__namespace.createElement(FreeText, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Highlight:\n        return React__namespace.createElement(Highlight, {\n          key: annotation.id,\n          annotation: annotation,\n          childAnnotation: childAnnotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Ink:\n        return React__namespace.createElement(Ink, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Line:\n        return React__namespace.createElement(Line, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Link:\n        return React__namespace.createElement(Link, {\n          key: annotation.id,\n          annotation: annotation,\n          doc: doc,\n          page: page,\n          viewport: clonedViewPort,\n          onExecuteNamedAction: onExecuteNamedAction,\n          onJumpToDest: onJumpToDest\n        });\n\n      case exports.AnnotationType.Polygon:\n        return React__namespace.createElement(Polygon, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Polyline:\n        return React__namespace.createElement(Polyline, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Popup:\n        return React__namespace.createElement(Popup, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Square:\n        return React__namespace.createElement(Square, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Squiggly:\n        return React__namespace.createElement(Squiggly, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Stamp:\n        return React__namespace.createElement(Stamp, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.StrikeOut:\n        return React__namespace.createElement(StrikeOut, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Text:\n        return React__namespace.createElement(Text, {\n          key: annotation.id,\n          annotation: annotation,\n          childAnnotation: childAnnotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Underline:\n        return React__namespace.createElement(Underline, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      default:\n        return React__namespace.createElement(React__namespace.Fragment, {\n          key: annotation.id\n        });\n    }\n  }));\n};\n\nvar AnnotationLoader = function (_a) {\n  var page = _a.page,\n      renderAnnotations = _a.renderAnnotations;\n\n  var _b = React__namespace.useState({\n    loading: true,\n    annotations: []\n  }),\n      status = _b[0],\n      setStatus = _b[1];\n\n  React__namespace.useEffect(function () {\n    page.getAnnotations({\n      intent: 'display'\n    }).then(function (result) {\n      setStatus({\n        loading: false,\n        annotations: result\n      });\n    });\n  }, []);\n  return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : renderAnnotations(status.annotations);\n};\n\nvar AnnotationLayer = function (_a) {\n  var doc = _a.doc,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n  var containerRef = React__namespace.useRef();\n\n  var renderAnnotations = function (annotations) {\n    return React__namespace.createElement(AnnotationLayerBody, {\n      annotations: annotations,\n      containerRef: containerRef,\n      doc: doc,\n      page: page,\n      pageIndex: pageIndex,\n      plugins: plugins,\n      rotation: rotation,\n      scale: scale,\n      onExecuteNamedAction: onExecuteNamedAction,\n      onJumpToDest: onJumpToDest\n    });\n  };\n\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: \"rpv-core__annotation-layer\"\n  }, React__namespace.createElement(AnnotationLoader, {\n    page: page,\n    renderAnnotations: renderAnnotations\n  }));\n};\n\nvar useIsMounted = function () {\n  var isMountedRef = React__namespace.useRef(false);\n  React__namespace.useEffect(function () {\n    isMountedRef.current = true;\n    return function () {\n      isMountedRef.current = false;\n    };\n  }, []);\n  return isMountedRef;\n};\n\nvar WithScale = function (_a) {\n  var callback = _a.callback,\n      children = _a.children,\n      rotation = _a.rotation,\n      scale = _a.scale;\n  useIsomorphicLayoutEffect(function () {\n    callback();\n  }, [rotation, scale]);\n  return React__namespace.createElement(React__namespace.Fragment, null, children);\n};\n\nvar CanvasLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width;\n  var isMounted = useIsMounted();\n  var canvasRef = React__namespace.useRef();\n  var renderTask = React__namespace.useRef();\n\n  var _b = React__namespace.useState(false),\n      rendered = _b[0],\n      setRendered = _b[1];\n\n  var devicePixelRatio = window.devicePixelRatio || 1;\n\n  var renderCanvas = function () {\n    setRendered(false);\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvasEle = canvasRef.current;\n    plugins.forEach(function (plugin) {\n      if (plugin.onCanvasLayerRender) {\n        plugin.onCanvasLayerRender({\n          ele: canvasEle,\n          pageIndex: pageIndex,\n          rotation: rotation,\n          scale: scale,\n          status: exports.LayerRenderStatus.PreRender\n        });\n      }\n    });\n    canvasEle.height = height * devicePixelRatio;\n    canvasEle.width = width * devicePixelRatio;\n    canvasEle.style.opacity = '0';\n    var canvasContext = canvasEle.getContext('2d', {\n      alpha: false\n    });\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale * devicePixelRatio\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      isMounted.current && setRendered(true);\n      canvasEle.style.removeProperty('opacity');\n      plugins.forEach(function (plugin) {\n        if (plugin.onCanvasLayerRender) {\n          plugin.onCanvasLayerRender({\n            ele: canvasEle,\n            pageIndex: pageIndex,\n            rotation: rotation,\n            scale: scale,\n            status: exports.LayerRenderStatus.DidRender\n          });\n        }\n      });\n    }, function () {\n      isMounted.current && setRendered(true);\n    });\n  };\n\n  return React__namespace.createElement(WithScale, {\n    callback: renderCanvas,\n    rotation: rotation,\n    scale: scale\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__canvas-layer\",\n    style: {\n      height: \"\".concat(height, \"px\"),\n      width: \"\".concat(width, \"px\")\n    }\n  }, !rendered && React__namespace.createElement(\"div\", {\n    className: \"rpv-core__canvas-layer-loader\"\n  }, React__namespace.createElement(Spinner, null)), React__namespace.createElement(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      transform: \"scale(\".concat(1 / devicePixelRatio, \")\"),\n      transformOrigin: \"top left\"\n    }\n  })));\n};\n\nvar SvgLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width;\n  var containerRef = React__namespace.useRef();\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    containerEle.innerHTML = '';\n  };\n\n  var renderSvg = function () {\n    var containerEle = containerRef.current;\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    page.getOperatorList().then(function (operatorList) {\n      empty();\n      var graphic = new PdfJsApi__namespace.SVGGraphics(page.commonObjs, page.objs);\n      graphic.getSVG(operatorList, viewport).then(function (svg) {\n        svg.style.height = \"\".concat(height, \"px\");\n        svg.style.width = \"\".concat(width, \"px\");\n        containerEle.appendChild(svg);\n      });\n    });\n  };\n\n  return React__namespace.createElement(WithScale, {\n    callback: renderSvg,\n    rotation: rotation,\n    scale: scale\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__svg-layer\",\n    ref: containerRef\n  }));\n};\n\nvar TextLayer = function (_a) {\n  var page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale;\n  var containerRef = React__namespace.useRef();\n  var renderTask = React__namespace.useRef();\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var spans = [].slice.call(containerEle.querySelectorAll('span.rpv-core__text-layer-text'));\n    spans.forEach(function (span) {\n      return containerEle.removeChild(span);\n    });\n    var breaks = [].slice.call(containerEle.querySelectorAll('br[role=\"presentation\"]'));\n    breaks.forEach(function (br) {\n      return containerEle.removeChild(br);\n    });\n  };\n\n  var renderText = function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    containerEle.removeAttribute('data-testid');\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    plugins.forEach(function (plugin) {\n      if (plugin.onTextLayerRender) {\n        plugin.onTextLayerRender({\n          ele: containerEle,\n          pageIndex: pageIndex,\n          scale: scale,\n          status: exports.LayerRenderStatus.PreRender\n        });\n      }\n    });\n    page.getTextContent().then(function (textContent) {\n      empty();\n      renderTask.current = PdfJsApi__namespace.renderTextLayer({\n        container: containerEle,\n        textContent: textContent,\n        viewport: viewport,\n        enhanceTextSelection: true\n      });\n      renderTask.current.promise.then(function () {\n        containerEle.setAttribute('data-testid', \"core__text-layer-\".concat(pageIndex));\n        var spans = [].slice.call(containerEle.children);\n        spans.forEach(function (span) {\n          return span.classList.add('rpv-core__text-layer-text');\n        });\n        plugins.forEach(function (plugin) {\n          if (plugin.onTextLayerRender) {\n            plugin.onTextLayerRender({\n              ele: containerEle,\n              pageIndex: pageIndex,\n              scale: scale,\n              status: exports.LayerRenderStatus.DidRender\n            });\n          }\n        });\n      }, function () {\n        containerEle.removeAttribute('data-testid');\n      });\n    });\n  };\n\n  return React__namespace.createElement(WithScale, {\n    callback: renderText,\n    rotation: rotation,\n    scale: scale\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__text-layer\",\n    ref: containerRef\n  }));\n};\n\nvar NUMBER_OF_OVERSCAN_PAGES = 2;\n\nvar PageLayer = function (_a) {\n  var currentPage = _a.currentPage,\n      doc = _a.doc,\n      height = _a.height,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      renderPage = _a.renderPage,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest,\n      onPageVisibilityChanged = _a.onPageVisibilityChanged;\n\n  var _b = React__namespace.useState({\n    page: null,\n    pageHeight: height,\n    pageWidth: width,\n    viewportRotation: 0\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var page = pageSize.page,\n      pageHeight = pageSize.pageHeight,\n      pageWidth = pageSize.pageWidth;\n  var prevIsCalculated = React__namespace.useRef(false);\n  var intersectionThreshold = Array(10).fill(null).map(function (_, i) {\n    return i / 10;\n  });\n  var scaledWidth = pageWidth * scale;\n  var scaledHeight = pageHeight * scale;\n  var isVertical = Math.abs(rotation) % 180 === 0;\n  var w = isVertical ? scaledWidth : scaledHeight;\n  var h = isVertical ? scaledHeight : scaledWidth;\n\n  var determinePageSize = function () {\n    if (prevIsCalculated.current) {\n      return;\n    }\n\n    prevIsCalculated.current = true;\n    getPage(doc, pageIndex).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      setPageSize({\n        page: pdfPage,\n        pageHeight: viewport.height,\n        pageWidth: viewport.width,\n        viewportRotation: viewport.rotation\n      });\n    });\n  };\n\n  var visibilityChanged = function (params) {\n    onPageVisibilityChanged(pageIndex, params.isVisible ? params.ratio : -1);\n\n    if (params.isVisible) {\n      determinePageSize();\n    }\n  };\n\n  var defaultPageRenderer = function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, props.canvasLayer.children, props.textLayer.children, props.annotationLayer.children);\n  };\n\n  var renderPageLayer = renderPage || defaultPageRenderer;\n  var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n  var containerRef = useIntersectionObserver({\n    threshold: intersectionThreshold,\n    onVisibilityChanged: visibilityChanged\n  });\n  React__namespace.useEffect(function () {\n    if (currentPage - NUMBER_OF_OVERSCAN_PAGES <= pageIndex && pageIndex <= currentPage + NUMBER_OF_OVERSCAN_PAGES) {\n      determinePageSize();\n    }\n  }, [currentPage]);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: \"rpv-core__page-layer\",\n    \"data-testid\": \"core__page-layer-\".concat(pageIndex),\n    style: {\n      height: \"\".concat(h, \"px\"),\n      width: \"\".concat(w, \"px\")\n    }\n  }, !page ? React__namespace.createElement(Spinner, null) : React__namespace.createElement(React__namespace.Fragment, null, renderPageLayer({\n    annotationLayer: {\n      attrs: {},\n      children: React__namespace.createElement(AnnotationLayer, {\n        doc: doc,\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationNumber,\n        scale: scale,\n        onExecuteNamedAction: onExecuteNamedAction,\n        onJumpToDest: onJumpToDest\n      })\n    },\n    canvasLayer: {\n      attrs: {},\n      children: React__namespace.createElement(CanvasLayer, {\n        height: h,\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationNumber,\n        scale: scale,\n        width: w\n      })\n    },\n    doc: doc,\n    height: h,\n    pageIndex: pageIndex,\n    rotation: rotation,\n    scale: scale,\n    svgLayer: {\n      attrs: {},\n      children: React__namespace.createElement(SvgLayer, {\n        height: h,\n        page: page,\n        rotation: rotationNumber,\n        scale: scale,\n        width: w\n      })\n    },\n    textLayer: {\n      attrs: {},\n      children: React__namespace.createElement(TextLayer, {\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationNumber,\n        scale: scale\n      })\n    },\n    width: w\n  }), plugins.map(function (plugin, idx) {\n    return plugin.renderPageLayer ? React__namespace.createElement(React__namespace.Fragment, {\n      key: idx\n    }, plugin.renderPageLayer({\n      doc: doc,\n      height: h,\n      pageIndex: pageIndex,\n      rotation: rotation,\n      scale: scale,\n      width: w\n    })) : React__namespace.createElement(React__namespace.Fragment, {\n      key: idx\n    });\n  })));\n};\n\nvar getFileExt = function (url) {\n  var str = url.split(/\\./).pop();\n  return str ? str.toLowerCase() : '';\n};\n\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\n\nvar calculateScale = function (container, pageHeight, pageWidth, scale) {\n  switch (scale) {\n    case exports.SpecialZoomLevel.ActualSize:\n      return 1;\n\n    case exports.SpecialZoomLevel.PageFit:\n      return Math.min((container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth, (container.clientHeight - 2 * PAGE_PADDING) / pageHeight);\n\n    case exports.SpecialZoomLevel.PageWidth:\n      return (container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth;\n  }\n};\n\nvar Inner = function (_a) {\n  var currentFile = _a.currentFile,\n      defaultScale = _a.defaultScale,\n      doc = _a.doc,\n      initialPage = _a.initialPage,\n      pageSize = _a.pageSize,\n      plugins = _a.plugins,\n      renderPage = _a.renderPage,\n      viewerState = _a.viewerState,\n      onDocumentLoad = _a.onDocumentLoad,\n      onOpenFile = _a.onOpenFile,\n      onPageChange = _a.onPageChange,\n      onZoom = _a.onZoom;\n  var docId = doc.loadingTask.docId;\n  var l10n = React__namespace.useContext(LocalizationContext).l10n;\n  var themeContext = React__namespace.useContext(ThemeContext);\n  var containerRef = React__namespace.useRef(null);\n  var pagesRef = React__namespace.useRef(null);\n\n  var _b = React__namespace.useState(0),\n      currentPage = _b[0],\n      setCurrentPage = _b[1];\n\n  var _c = React__namespace.useState(0),\n      rotation = _c[0],\n      setRotation = _c[1];\n\n  var stateRef = React__namespace.useRef(viewerState);\n\n  var _d = React__namespace.useState(pageSize.scale),\n      scale = _d[0],\n      setScale = _d[1];\n\n  var keepSpecialZoomLevelRef = React__namespace.useRef(typeof defaultScale === 'string' ? defaultScale : null);\n  var pagesMapRef = React__namespace.useRef(new Map());\n  var pageIndexes = React__namespace.useMemo(function () {\n    return Array(doc.numPages).fill(0).map(function (_, index) {\n      return index;\n    });\n  }, [docId]);\n  React__namespace.useEffect(function () {\n    return function () {\n      pagesMapRef.current.clear();\n    };\n  }, []);\n\n  var handlePagesResize = function (target) {\n    if (keepSpecialZoomLevelRef.current) {\n      zoom(keepSpecialZoomLevelRef.current);\n    }\n  };\n\n  useTrackResize({\n    targetRef: pagesRef,\n    onResize: handlePagesResize\n  });\n  var numPages = doc.numPages;\n  var pageWidth = pageSize.pageWidth,\n      pageHeight = pageSize.pageHeight;\n  var arr = Array(numPages).fill(null);\n  var pageVisibility = arr.map(function () {\n    return 0;\n  });\n\n  var setViewerState = function (viewerState) {\n    var newState = viewerState;\n    plugins.forEach(function (plugin) {\n      if (plugin.onViewerStateChange) {\n        newState = plugin.onViewerStateChange(newState);\n      }\n    });\n    stateRef.current = newState;\n  };\n\n  var getPagesContainer = function () {\n    return pagesRef.current;\n  };\n\n  var getPageElement = function (pageIndex) {\n    return pagesMapRef.current.get(pageIndex) || null;\n  };\n\n  var getViewerState = function () {\n    return stateRef.current;\n  };\n\n  var jumpToDestination = function (pageIndex, bottomOffset, leftOffset, scaleTo) {\n    var pagesContainer = pagesRef.current;\n    var currentState = stateRef.current;\n    var targetPageEle = pagesMapRef.current.get(pageIndex);\n\n    if (!pagesContainer || !currentState || !targetPageEle) {\n      return;\n    }\n\n    getPage(doc, pageIndex).then(function (page) {\n      var viewport = page.getViewport({\n        scale: 1\n      });\n      var top = 0;\n      var bottom = bottomOffset || 0;\n      var left = leftOffset || 0;\n      var updateScale = currentState.scale;\n\n      switch (scaleTo) {\n        case exports.SpecialZoomLevel.PageFit:\n          top = 0;\n          left = 0;\n          zoom(exports.SpecialZoomLevel.PageFit);\n          break;\n\n        case exports.SpecialZoomLevel.PageWidth:\n          updateScale = calculateScale(pagesContainer, pageHeight, pageWidth, exports.SpecialZoomLevel.PageWidth);\n          top = (viewport.height - bottom) * updateScale;\n          left = left * updateScale;\n          zoom(updateScale);\n          break;\n\n        default:\n          var boundingRect = viewport.convertToViewportPoint(left, bottom);\n          left = Math.max(boundingRect[0] * currentState.scale, 0);\n          top = Math.max(boundingRect[1] * currentState.scale, 0);\n          break;\n      }\n\n      pagesContainer.scrollTop = targetPageEle.offsetTop + top;\n      pagesContainer.scrollLeft = targetPageEle.offsetLeft + left;\n    });\n  };\n\n  var jumpToPage = function (pageIndex) {\n    if (pageIndex < 0 || pageIndex >= numPages) {\n      return;\n    }\n\n    var pagesContainer = pagesRef.current;\n    var targetPage = pagesMapRef.current.get(pageIndex);\n\n    if (pagesContainer && targetPage) {\n      pagesContainer.scrollTop = targetPage.offsetTop;\n      pagesContainer.scrollLeft = targetPage.offsetLeft;\n    }\n\n    setCurrentPage(pageIndex);\n  };\n\n  var openFile = function (file) {\n    if (getFileExt(file.name).toLowerCase() !== 'pdf') {\n      return;\n    }\n\n    new Promise(function (resolve) {\n      var reader = new FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onload = function () {\n        var bytes = new Uint8Array(reader.result);\n        resolve(bytes);\n      };\n    }).then(function (data) {\n      onOpenFile(file.name, data);\n    });\n  };\n\n  var rotate = function (updateRotation) {\n    setRotation(updateRotation);\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: currentPage,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      rotation: updateRotation,\n      scale: scale\n    });\n  };\n\n  var zoom = function (newScale) {\n    var pagesEle = pagesRef.current;\n    var updateScale = pagesEle ? typeof newScale === 'string' ? calculateScale(pagesEle, pageHeight, pageWidth, newScale) : newScale : 1;\n    keepSpecialZoomLevelRef.current = typeof newScale === 'string' ? newScale : null;\n    setScale(updateScale);\n    onZoom({\n      doc: doc,\n      scale: updateScale\n    });\n  };\n\n  React__namespace.useEffect(function () {\n    var pagesEle = pagesRef.current;\n    var currentState = stateRef.current;\n\n    if (!pagesEle || !currentState) {\n      return;\n    }\n\n    pagesEle.scrollTop = pagesEle.scrollTop * scale / currentState.scale;\n    pagesEle.scrollLeft = pagesEle.scrollLeft * scale / currentState.scale;\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: currentState.pageIndex,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      rotation: rotation,\n      scale: scale\n    });\n  }, [scale]);\n\n  var getPluginMethods = function () {\n    return {\n      getPageElement: getPageElement,\n      getPagesContainer: getPagesContainer,\n      getViewerState: getViewerState,\n      jumpToDestination: jumpToDestination,\n      jumpToPage: jumpToPage,\n      openFile: openFile,\n      rotate: rotate,\n      setViewerState: setViewerState,\n      zoom: zoom\n    };\n  };\n\n  React__namespace.useEffect(function () {\n    var pluginMethods = getPluginMethods();\n    plugins.forEach(function (plugin) {\n      if (plugin.install) {\n        plugin.install(pluginMethods);\n      }\n    });\n    return function () {\n      plugins.forEach(function (plugin) {\n        if (plugin.uninstall) {\n          plugin.uninstall(pluginMethods);\n        }\n      });\n    };\n  }, [docId]);\n  React__namespace.useEffect(function () {\n    onDocumentLoad({\n      doc: doc,\n      file: currentFile\n    });\n    plugins.forEach(function (plugin) {\n      plugin.onDocumentLoad && plugin.onDocumentLoad({\n        doc: doc,\n        file: currentFile\n      });\n    });\n\n    if (initialPage) {\n      jumpToPage(initialPage);\n    }\n  }, [docId]);\n  React__namespace.useEffect(function () {\n    onPageChange({\n      currentPage: currentPage,\n      doc: doc\n    });\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: currentPage,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      rotation: rotation,\n      scale: scale\n    });\n  }, [currentPage]);\n  React__namespace.useEffect(function () {\n    return function () {\n      clearPagesCache();\n    };\n  }, []);\n\n  var pageVisibilityChanged = function (pageIndex, ratio) {\n    pageVisibility[pageIndex] = ratio;\n    var maxRatioPage = pageVisibility.reduce(function (maxIndex, item, index, array) {\n      return item > array[maxIndex] ? index : maxIndex;\n    }, 0);\n    setCurrentPage(maxRatioPage);\n  };\n\n  var executeNamedAction = function (action) {\n    var previousPage = currentPage - 1;\n    var nextPage = currentPage + 1;\n\n    switch (action) {\n      case 'FirstPage':\n        jumpToPage(0);\n        break;\n\n      case 'LastPage':\n        jumpToPage(numPages - 1);\n        break;\n\n      case 'NextPage':\n        nextPage < numPages && jumpToPage(nextPage);\n        break;\n\n      case 'PrevPage':\n        previousPage >= 0 && jumpToPage(previousPage);\n        break;\n    }\n  };\n\n  var pageLabel = l10n && l10n.core ? l10n.core.pageLabel : 'Page {{pageIndex}}';\n\n  var renderViewer = function () {\n    var slot = {\n      attrs: {\n        'data-testid': 'core__inner-container',\n        ref: containerRef,\n        style: {\n          height: '100%'\n        }\n      },\n      children: React__namespace.createElement(React__namespace.Fragment, null),\n      subSlot: {\n        attrs: {\n          'data-testid': 'core__inner-pages',\n          ref: pagesRef,\n          style: {\n            height: '100%',\n            overflow: 'auto',\n            position: 'relative'\n          }\n        },\n        children: React__namespace.createElement(React__namespace.Fragment, null, pageIndexes.map(function (index) {\n          return React__namespace.createElement(\"div\", {\n            \"aria-label\": pageLabel.replace('{{pageIndex}}', \"\".concat(index + 1)),\n            className: \"rpv-core__inner-page\",\n            key: \"pagelayer-\".concat(index),\n            ref: function (ref) {\n              pagesMapRef.current.set(index, ref);\n            },\n            role: \"region\"\n          }, React__namespace.createElement(PageLayer, {\n            currentPage: currentPage,\n            doc: doc,\n            height: pageHeight,\n            pageIndex: index,\n            plugins: plugins,\n            renderPage: renderPage,\n            rotation: rotation,\n            scale: scale,\n            width: pageWidth,\n            onExecuteNamedAction: executeNamedAction,\n            onJumpToDest: jumpToDestination,\n            onPageVisibilityChanged: pageVisibilityChanged\n          }));\n        }))\n      }\n    };\n    plugins.forEach(function (plugin) {\n      if (plugin.renderViewer) {\n        slot = plugin.renderViewer({\n          containerRef: containerRef,\n          doc: doc,\n          pageHeight: pageHeight,\n          pageWidth: pageWidth,\n          rotation: rotation,\n          slot: slot,\n          themeContext: themeContext,\n          jumpToPage: jumpToPage,\n          openFile: openFile,\n          rotate: rotate,\n          zoom: zoom\n        });\n      }\n    });\n    return slot;\n  };\n\n  var renderSlot = function (slot) {\n    return React__namespace.createElement(\"div\", __assign({}, slot.attrs, {\n      style: slot.attrs && slot.attrs.style ? slot.attrs.style : {}\n    }), slot.children, slot.subSlot && renderSlot(slot.subSlot));\n  };\n\n  return renderSlot(renderViewer());\n};\n\nvar LEVELS = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.4, 2.7, 3.0, 3.3, 3.7, 4.1, 4.6, 5.1, 5.7, 6.3, 7.0, 7.7, 8.5, 9.4, 10];\n\nvar decrease = function (currentLevel) {\n  var found = LEVELS.findIndex(function (item) {\n    return item >= currentLevel;\n  });\n  return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar RESERVE_WIDTH = 45;\n\nvar PageSizeCalculator = function (_a) {\n  var defaultScale = _a.defaultScale,\n      doc = _a.doc,\n      render = _a.render;\n  var pagesRef = React__namespace.useRef(null);\n\n  var _b = React__namespace.useState({\n    pageHeight: 0,\n    pageWidth: 0,\n    scale: 1\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  React__namespace.useLayoutEffect(function () {\n    getPage(doc, 0).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      var w = viewport.width;\n      var h = viewport.height;\n      var pagesEle = pagesRef.current;\n\n      if (!pagesEle) {\n        return;\n      }\n\n      var parentEle = pagesEle.parentElement;\n      var scaled = (parentEle.clientWidth - RESERVE_WIDTH) / w;\n      var scale = defaultScale ? typeof defaultScale === 'string' ? calculateScale(parentEle, h, w, defaultScale) : defaultScale : decrease(scaled);\n      setPageSize({\n        pageHeight: h,\n        pageWidth: w,\n        scale: scale\n      });\n    });\n  }, [doc]);\n  var pageWidth = pageSize.pageWidth;\n  return pageWidth === 0 ? React__namespace.createElement(\"div\", {\n    className: \"rpv-core__page-size-calculator\",\n    ref: pagesRef\n  }, React__namespace.createElement(Spinner, null)) : render(pageSize);\n};\n\nvar LoadingStatus = function () {\n  function LoadingStatus() {}\n\n  return LoadingStatus;\n}();\n\nvar SubmitPassword;\n\n(function (SubmitPassword) {\n  SubmitPassword[SubmitPassword[\"REQUIRE_PASSWORD\"] = 0] = \"REQUIRE_PASSWORD\";\n  SubmitPassword[SubmitPassword[\"WRONG_PASSWORD\"] = 1] = \"WRONG_PASSWORD\";\n})(SubmitPassword || (SubmitPassword = {}));\n\nvar AskForPasswordState = function (_super) {\n  __extends(AskForPasswordState, _super);\n\n  function AskForPasswordState(verifyPassword, submitPassword) {\n    var _this = _super.call(this) || this;\n\n    _this.verifyPassword = verifyPassword;\n    _this.submitPassword = submitPassword;\n    return _this;\n  }\n\n  return AskForPasswordState;\n}(LoadingStatus);\n\nvar AskingPassword = function (_a) {\n  var submitPassword = _a.submitPassword,\n      verifyPassword = _a.verifyPassword,\n      onDocumentAskPassword = _a.onDocumentAskPassword;\n  var l10n = React__namespace.useContext(LocalizationContext).l10n;\n\n  var _b = React__namespace.useState(''),\n      password = _b[0],\n      setPassword = _b[1];\n\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n\n  var submit = function () {\n    return verifyPassword(password);\n  };\n\n  var handleKeyDown = function (e) {\n    if (e.key === 'Enter') {\n      submit();\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    if (onDocumentAskPassword) {\n      onDocumentAskPassword({\n        verifyPassword: verifyPassword\n      });\n    }\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-wrapper\"\n  }, React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__asking-password': true,\n      'rpv-core__asking-password--rtl': isRtl\n    })\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-message\"\n  }, submitPassword === SubmitPassword.REQUIRE_PASSWORD && l10n.core.askingPassword.requirePasswordToOpen, submitPassword === SubmitPassword.WRONG_PASSWORD && l10n.core.wrongPassword.tryAgain), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-body\"\n  }, React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__asking-password-input': true,\n      'rpv-core__asking-password-input--ltr': !isRtl,\n      'rpv-core__asking-password-input--rtl': isRtl\n    })\n  }, React__namespace.createElement(TextBox, {\n    testId: \"core__asking-password-input\",\n    type: \"password\",\n    value: password,\n    onChange: setPassword,\n    onKeyDown: handleKeyDown\n  })), React__namespace.createElement(PrimaryButton, {\n    onClick: submit\n  }, l10n.core.askingPassword.submit))));\n};\n\nvar CompletedState = function (_super) {\n  __extends(CompletedState, _super);\n\n  function CompletedState(doc) {\n    var _this = _super.call(this) || this;\n\n    _this.doc = doc;\n    return _this;\n  }\n\n  return CompletedState;\n}(LoadingStatus);\n\nvar FailureState = function (_super) {\n  __extends(FailureState, _super);\n\n  function FailureState(error) {\n    var _this = _super.call(this) || this;\n\n    _this.error = error;\n    return _this;\n  }\n\n  return FailureState;\n}(LoadingStatus);\n\nvar LoadingState = function (_super) {\n  __extends(LoadingState, _super);\n\n  function LoadingState(percentages) {\n    var _this = _super.call(this) || this;\n\n    _this.percentages = percentages;\n    return _this;\n  }\n\n  return LoadingState;\n}(LoadingStatus);\n\nvar DocumentLoader = function (_a) {\n  var characterMap = _a.characterMap,\n      file = _a.file,\n      httpHeaders = _a.httpHeaders,\n      render = _a.render,\n      renderError = _a.renderError,\n      renderLoader = _a.renderLoader,\n      transformGetDocumentParams = _a.transformGetDocumentParams,\n      withCredentials = _a.withCredentials,\n      onDocumentAskPassword = _a.onDocumentAskPassword;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n\n  var _b = React__namespace.useState(new LoadingState(0)),\n      status = _b[0],\n      setStatus = _b[1];\n\n  var _c = React__namespace.useState(0),\n      percentages = _c[0],\n      setPercentages = _c[1];\n\n  var _d = React__namespace.useState(null),\n      loadedDocument = _d[0],\n      setLoadedDocument = _d[1];\n\n  var isMounted = useIsMounted();\n  React__namespace.useEffect(function () {\n    setStatus(new LoadingState(0));\n    var worker = new PdfJsApi__namespace.PDFWorker({\n      name: \"PDFWorker_\".concat(Date.now())\n    });\n    var params = Object.assign({\n      httpHeaders: httpHeaders,\n      withCredentials: withCredentials,\n      worker: worker\n    }, 'string' === typeof file ? {\n      url: file\n    } : {\n      data: file\n    }, characterMap ? {\n      cMapUrl: characterMap.url,\n      cMapPacked: characterMap.isCompressed\n    } : {});\n    var transformParams = transformGetDocumentParams ? transformGetDocumentParams(params) : params;\n    var loadingTask = PdfJsApi__namespace.getDocument(transformParams);\n\n    loadingTask.onPassword = function (verifyPassword, reason) {\n      switch (reason) {\n        case PdfJsApi__namespace.PasswordResponses.NEED_PASSWORD:\n          isMounted.current && setStatus(new AskForPasswordState(verifyPassword, SubmitPassword.REQUIRE_PASSWORD));\n          break;\n\n        case PdfJsApi__namespace.PasswordResponses.INCORRECT_PASSWORD:\n          isMounted.current && setStatus(new AskForPasswordState(verifyPassword, SubmitPassword.WRONG_PASSWORD));\n          break;\n      }\n    };\n\n    loadingTask.onProgress = function (progress) {\n      progress.total > 0 ? isMounted.current && setPercentages(Math.min(100, 100 * progress.loaded / progress.total)) : isMounted.current && setPercentages(100);\n    };\n\n    loadingTask.promise.then(function (doc) {\n      return isMounted.current && setLoadedDocument(doc);\n    }, function (err) {\n      return isMounted.current && !worker.destroyed && setStatus(new FailureState({\n        message: err.message || 'Cannot load document',\n        name: err.name\n      }));\n    });\n    return function () {\n      loadingTask.destroy();\n      worker.destroy();\n    };\n  }, [file]);\n  React__namespace.useEffect(function () {\n    percentages === 100 && loadedDocument ? isMounted.current && setStatus(new CompletedState(loadedDocument)) : isMounted.current && setStatus(new LoadingState(percentages));\n  }, [percentages, loadedDocument]);\n\n  if (status instanceof AskForPasswordState) {\n    return React__namespace.createElement(AskingPassword, {\n      submitPassword: status.submitPassword,\n      verifyPassword: status.verifyPassword,\n      onDocumentAskPassword: onDocumentAskPassword\n    });\n  }\n\n  if (status instanceof CompletedState) {\n    return render(status.doc);\n  }\n\n  if (status instanceof FailureState) {\n    return renderError ? renderError(status.error) : React__namespace.createElement(\"div\", {\n      className: classNames({\n        'rpv-core__doc-error': true,\n        'rpv-core__doc-error--rtl': isRtl\n      })\n    }, React__namespace.createElement(\"div\", {\n      className: \"rpv-core__doc-error-text\"\n    }, status.error.message));\n  }\n\n  if (status instanceof LoadingState) {\n    return React__namespace.createElement(\"div\", {\n      \"data-testid\": \"core__doc-loading\",\n      className: classNames({\n        'rpv-core__doc-loading': true,\n        'rpv-core__doc-loading--rtl': isRtl\n      })\n    }, renderLoader ? renderLoader(status.percentages) : React__namespace.createElement(Spinner, null));\n  }\n\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__doc-loading\",\n    \"data-testid\": \"core__doc-loading\"\n  }, React__namespace.createElement(Spinner, null));\n};\n\nvar isDarkMode = function () {\n  return typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n};\n\nvar withTheme = function (theme, onSwitchTheme) {\n  var initialTheme = React__namespace.useMemo(function () {\n    return theme === 'auto' ? isDarkMode() ? 'dark' : 'light' : theme;\n  }, []);\n\n  var _a = React__namespace.useState(initialTheme),\n      currentTheme = _a[0],\n      setCurrentTheme = _a[1];\n\n  var prevTheme = usePrevious(currentTheme);\n  React__namespace.useEffect(function () {\n    if (theme !== 'auto') {\n      return;\n    }\n\n    var media = window.matchMedia('(prefers-color-scheme: dark)');\n\n    var handler = function (e) {\n      setCurrentTheme(e.matches ? 'dark' : 'light');\n    };\n\n    media.addEventListener('change', handler);\n    return function () {\n      return media.removeEventListener('change', handler);\n    };\n  }, []);\n  React__namespace.useEffect(function () {\n    if (currentTheme !== prevTheme && onSwitchTheme) {\n      onSwitchTheme(currentTheme);\n    }\n  }, [currentTheme]);\n  React__namespace.useEffect(function () {\n    if (theme !== currentTheme) {\n      setCurrentTheme(theme);\n    }\n  }, [theme]);\n  return {\n    currentTheme: currentTheme,\n    setCurrentTheme: setCurrentTheme\n  };\n};\n\nvar isSameUrl = function (a, b) {\n  var typeA = typeof a;\n  var typeB = typeof b;\n\n  if (typeA === 'string' && typeB === 'string' && a === b) {\n    return true;\n  }\n\n  if (typeA === 'object' && typeB === 'object') {\n    return a.length === b.length && a.every(function (v, i) {\n      return v === b[i];\n    });\n  }\n\n  return false;\n};\n\nvar Viewer = function (_a) {\n  var characterMap = _a.characterMap,\n      defaultScale = _a.defaultScale,\n      fileUrl = _a.fileUrl,\n      _b = _a.httpHeaders,\n      httpHeaders = _b === void 0 ? {} : _b,\n      _c = _a.initialPage,\n      initialPage = _c === void 0 ? 0 : _c,\n      localization = _a.localization,\n      _d = _a.plugins,\n      plugins = _d === void 0 ? [] : _d,\n      renderError = _a.renderError,\n      renderPage = _a.renderPage,\n      renderLoader = _a.renderLoader,\n      transformGetDocumentParams = _a.transformGetDocumentParams,\n      _e = _a.theme,\n      theme = _e === void 0 ? {\n    direction: exports.TextDirection.LeftToRight,\n    theme: 'light'\n  } : _e,\n      _f = _a.withCredentials,\n      withCredentials = _f === void 0 ? false : _f,\n      onDocumentAskPassword = _a.onDocumentAskPassword,\n      _g = _a.onDocumentLoad,\n      onDocumentLoad = _g === void 0 ? function () {} : _g,\n      _h = _a.onPageChange,\n      onPageChange = _h === void 0 ? function () {} : _h,\n      _j = _a.onSwitchTheme,\n      onSwitchTheme = _j === void 0 ? function () {} : _j,\n      _k = _a.onZoom,\n      onZoom = _k === void 0 ? function () {} : _k;\n\n  var _l = React__namespace.useState({\n    data: fileUrl,\n    name: typeof fileUrl === 'string' ? fileUrl : '',\n    shouldLoad: false\n  }),\n      file = _l[0],\n      setFile = _l[1];\n\n  var openFile = function (fileName, data) {\n    setFile({\n      data: data,\n      name: fileName,\n      shouldLoad: true\n    });\n  };\n\n  var _m = React__namespace.useState(false),\n      visible = _m[0],\n      setVisible = _m[1];\n\n  var prevFile = usePrevious(file);\n  React__namespace.useEffect(function () {\n    if (!isSameUrl(prevFile.data, fileUrl)) {\n      setFile({\n        data: fileUrl,\n        name: typeof fileUrl === 'string' ? fileUrl : '',\n        shouldLoad: visible\n      });\n    }\n  }, [fileUrl, visible]);\n\n  var visibilityChanged = function (params) {\n    setVisible(params.isVisible);\n\n    if (params.isVisible) {\n      setFile(function (currentFile) {\n        return Object.assign({}, currentFile, {\n          shouldLoad: true\n        });\n      });\n    }\n  };\n\n  var containerRef = useIntersectionObserver({\n    onVisibilityChanged: visibilityChanged\n  });\n  var themeProps = typeof theme === 'string' ? {\n    direction: exports.TextDirection.LeftToRight,\n    theme: theme\n  } : theme;\n\n  var _o = React__namespace.useState(localization || DefaultLocalization),\n      l10n = _o[0],\n      setL10n = _o[1];\n\n  var localizationContext = {\n    l10n: l10n,\n    setL10n: setL10n\n  };\n  var themeContext = Object.assign({}, {\n    direction: themeProps.direction\n  }, withTheme(themeProps.theme || 'light', onSwitchTheme));\n  React__namespace.useEffect(function () {\n    if (localization) {\n      setL10n(localization);\n    }\n  }, [localization]);\n  return React__namespace.createElement(LocalizationContext.Provider, {\n    value: localizationContext\n  }, React__namespace.createElement(ThemeContext.Provider, {\n    value: themeContext\n  }, React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: \"rpv-core__viewer rpv-core__viewer--\".concat(themeContext.currentTheme),\n    \"data-testid\": \"core__viewer\",\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, file.shouldLoad && React__namespace.createElement(DocumentLoader, {\n    characterMap: characterMap,\n    file: file.data,\n    httpHeaders: httpHeaders,\n    render: function (doc) {\n      return React__namespace.createElement(PageSizeCalculator, {\n        defaultScale: defaultScale,\n        doc: doc,\n        render: function (ps) {\n          return React__namespace.createElement(Inner, {\n            currentFile: {\n              data: file.data,\n              name: file.name\n            },\n            defaultScale: defaultScale,\n            doc: doc,\n            initialPage: initialPage,\n            pageSize: ps,\n            plugins: plugins,\n            renderPage: renderPage,\n            viewerState: {\n              file: file,\n              pageIndex: initialPage,\n              pageHeight: ps.pageHeight,\n              pageWidth: ps.pageWidth,\n              rotation: 0,\n              scale: ps.scale\n            },\n            onDocumentLoad: onDocumentLoad,\n            onOpenFile: openFile,\n            onPageChange: onPageChange,\n            onZoom: onZoom\n          });\n        }\n      });\n    },\n    renderError: renderError,\n    renderLoader: renderLoader,\n    transformGetDocumentParams: transformGetDocumentParams,\n    withCredentials: withCredentials,\n    onDocumentAskPassword: onDocumentAskPassword\n  }))));\n};\n\nvar Worker = function (_a) {\n  var children = _a.children,\n      workerUrl = _a.workerUrl;\n  PdfJsApi__namespace.GlobalWorkerOptions.workerSrc = workerUrl;\n  return React__namespace.createElement(React__namespace.Fragment, null, children);\n};\n\nvar isMac = function () {\n  return typeof window !== 'undefined' ? /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform) : false;\n};\n\nexports.Button = Button;\nexports.Icon = Icon;\nexports.LocalizationContext = LocalizationContext;\nexports.Menu = Menu;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.MinimalButton = MinimalButton;\nexports.Modal = Modal;\nexports.Popover = Popover;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.Separator = Separator;\nexports.Spinner = Spinner;\nexports.Splitter = Splitter;\nexports.TextBox = TextBox;\nexports.ThemeContext = ThemeContext;\nexports.Tooltip = Tooltip;\nexports.Viewer = Viewer;\nexports.Worker = Worker;\nexports.classNames = classNames;\nexports.createStore = createStore;\nexports.getDestination = getDestination;\nexports.getPage = getPage;\nexports.isMac = isMac;\nexports.useIntersectionObserver = useIntersectionObserver;\nexports.useIsMounted = useIsMounted;\nexports.useIsomorphicLayoutEffect = useIsomorphicLayoutEffect;","map":{"version":3,"sources":["C:/Users/nom65/IdeaProjects/symbol-it-project/frontend/node_modules/@react-pdf-viewer/core/lib/cjs/core.js"],"names":["Object","defineProperty","exports","value","React","require","PdfJsApi","_interopNamespace","e","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__namespace","PdfJsApi__namespace","AnnotationType","LayerRenderStatus","Position","SpecialZoomLevel","ToggleStatus","extendStatics","b","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","__assign","assign","t","s","i","arguments","length","apply","TextDirection","ThemeContext","createContext","currentTheme","direction","LeftToRight","setCurrentTheme","classNames","classes","result","clazz","push","join","Button","_a","children","testId","onClick","useContext","isRtl","RightToLeft","attrs","createElement","className","type","useIsomorphicLayoutEffect","window","useLayoutEffect","useEffect","Menu","containerRef","useRef","visibleMenuItemsRef","handleKeyDown","container","current","key","preventDefault","moveToItem","_","currentIndex","items","getNextItem","findIndex","item","getAttribute","targetIndex","Math","min","max","setAttribute","focus","findVisibleItems","visibleItems","querySelectorAll","HTMLElement","parent_1","parentElement","getComputedStyle","display","document","addEventListener","removeEventListener","ref","role","tabIndex","MenuDivider","Icon","_b","ignoreDirection","_c","size","width","concat","focusable","height","viewBox","CheckIcon","MenuItem","checked","icon","_d","isDisabled","MinimalButton","ariaLabel","ariaKeyShortcuts","_e","isSelected","PrimaryButton","ProgressBar","progress","style","Separator","useIntersectionObserver","props","threshold","onVisibilityChanged","io","IntersectionObserver","entries","entry","isVisible","isIntersecting","ratio","intersectionRatio","observe","unobserve","Spinner","useState","visible","setVisible","handleVisibilityChanged","params","Splitter","constrain","resizerRef","leftSideRef","rightSideRef","xRef","yRef","leftWidthRef","resizerWidthRef","eventOptions","capture","handleMouseMove","resizerEle","leftSide","rightSide","resizerWidth","dx","clientX","firstHalfSize","containerWidth","getBoundingClientRect","firstHalfPercentage","classList","add","secondHalfSize","secondHalfPercentage","body","handleMouseUp","remove","handleMouseDown","clientY","previousElementSibling","nextElementSibling","onMouseDown","TextBox","autoFocus","placeholder","_f","onChange","_g","onKeyDown","textboxRef","target","textboxEle","x","scrollX","y","scrollY","scrollTo","useClickOutside","closeOnClickOutside","targetRef","onClickOutside","clickHandler","contains","useEscape","handler","keyUpHandler","useLockScroll","originalStyle","overflow","ModalBody","ariaControlsSuffix","closeOnEscape","onToggle","contentRef","contentEle","maxHeight","clientHeight","id","ModalOverlay","useToggle","isOpened","opened","setOpened","toggle","status","Close","Open","Toggle","Portal","content","Fragment","uniqueId","Modal","controlsSuffix","renderTarget","renderContent","calculatePosition","position","offset","targetRect","contentRect","top","left","TopLeft","TopCenter","TopRight","RightTop","RightCenter","RightBottom","BottomLeft","BottomCenter","BottomRight","LeftTop","LeftCenter","LeftBottom","usePosition","anchorRef","targetEle","anchorEle","anchorRect","Arrow","customClassName","PopoverBody","onClose","innerRef","innerContentEle","innerId","PopoverOverlay","Popover","ariaHasPopup","TooltipBody","Tooltip","activeElement","close","open","onBlur","shouldHideTooltip","relatedTarget","currentTarget","onFocus","onMouseEnter","onMouseLeave","createStore","initialState","state","listeners","subscribe","unsubscribe","filter","f","update","data","core","askingPassword","requirePasswordToOpen","submit","wrongPassword","tryAgain","pageLabel","enUs","DefaultLocalization","LocalizationContext","l10n","setL10n","usePrevious","useTrackResize","onResize","ResizeObserver","AnnotationBorderStyleType","dateRegex","RegExp","parse","defaultValue","parsed","parseInt","convertDate","input","matches","exec","year","month","day","hour","minute","second","universalTimeRelation","offsetHour","offsetMinute","Date","UTC","PopupWrapper","annotation","dateStr","modificationDate","date","toLocaleDateString","toLocaleTimeString","containerEle","annotationEle","querySelector","ele","zIndex","annotationType","Popup","title","contents","split","map","index","TogglePopupBy","useTogglePopup","Hover","togglePopupBy","setTooglePopupBy","toggleOnClick","Click","openOnHover","closeOnHover","Annotation","ignoreBorder","hasPopup","isRenderable","page","viewport","rect","normalizeRect","r","bound","view","styles","borderColor","borderRadius","borderStyle","borderWidth","Dashed","Solid","Underline","borderBottomStyle","Beveled","Inset","horizontalCornerRadius","verticalCornerRadius","color","popup","slot","transform","transformOrigin","Caret","Circle","preserveAspectRatio","version","cy","fill","rx","ry","stroke","strokeWidth","getFileName","url","str","pop","downloadFile","blobUrl","URL","createObjectURL","Blob","link","href","appendChild","click","removeChild","revokeObjectURL","FileAttachment","doubleClick","file","filename","onDoubleClick","FreeText","ignoredParents","parentType","indexOf","parentId","parent","parseFloat","Highlight","childAnnotation","hasQuadPoints","quadPoints","annotations","quadPoint","ann","Ink","inkLists","inkList","points","Line","x1","lineCoordinates","x2","y1","y2","normalizeDestination","pageIndex","destArray","name","bottomOffset","leftOffset","scaleTo","PageFit","PageWidth","pageOutlinesMap","Map","pagesMap","generateRefKey","outline","num","gen","getPageIndex","cacheOutlineRef","set","clearPagesCache","clear","getPage","doc","Promise","reject","resolve","then","getDestination","dest","res","outlineRef_1","Link","onExecuteNamedAction","onJumpToDest","action","rel","newWindow","Polygon","vertices","Polyline","Square","Squiggly","Stamp","StrikeOut","CommentIcon","HelpIcon","KeyIcon","NoteIcon","ParagraphIcon","TriangleIcon","Text","toLowerCase","AnnotationLayerBody","plugins","rotation","scale","getViewport","clonedViewPort","clone","dontFlip","filterAnnotations","plugin","onAnnotationLayerRender","find","AnnotationLoader","renderAnnotations","loading","setStatus","getAnnotations","intent","AnnotationLayer","useIsMounted","isMountedRef","WithScale","callback","CanvasLayer","isMounted","canvasRef","renderTask","rendered","setRendered","devicePixelRatio","renderCanvas","task","cancel","canvasEle","onCanvasLayerRender","PreRender","opacity","canvasContext","getContext","alpha","render","promise","removeProperty","DidRender","SvgLayer","empty","innerHTML","renderSvg","getOperatorList","operatorList","graphic","SVGGraphics","commonObjs","objs","getSVG","svg","TextLayer","spans","slice","span","breaks","br","renderText","removeAttribute","onTextLayerRender","getTextContent","textContent","renderTextLayer","enhanceTextSelection","NUMBER_OF_OVERSCAN_PAGES","PageLayer","currentPage","renderPage","onPageVisibilityChanged","pageHeight","pageWidth","viewportRotation","pageSize","setPageSize","prevIsCalculated","intersectionThreshold","scaledWidth","scaledHeight","isVertical","abs","w","h","determinePageSize","pdfPage","visibilityChanged","defaultPageRenderer","canvasLayer","textLayer","annotationLayer","renderPageLayer","rotationNumber","svgLayer","idx","getFileExt","SCROLL_BAR_WIDTH","PAGE_PADDING","calculateScale","ActualSize","clientWidth","Inner","currentFile","defaultScale","initialPage","viewerState","onDocumentLoad","onOpenFile","onPageChange","onZoom","docId","loadingTask","themeContext","pagesRef","setCurrentPage","setRotation","stateRef","setScale","keepSpecialZoomLevelRef","pagesMapRef","pageIndexes","useMemo","numPages","handlePagesResize","zoom","arr","pageVisibility","setViewerState","newState","onViewerStateChange","getPagesContainer","getPageElement","getViewerState","jumpToDestination","pagesContainer","currentState","targetPageEle","bottom","updateScale","boundingRect","convertToViewportPoint","scrollTop","offsetTop","scrollLeft","offsetLeft","jumpToPage","targetPage","openFile","reader","FileReader","readAsArrayBuffer","onload","bytes","Uint8Array","rotate","updateRotation","newScale","pagesEle","getPluginMethods","pluginMethods","install","uninstall","pageVisibilityChanged","maxRatioPage","reduce","maxIndex","array","executeNamedAction","previousPage","nextPage","renderViewer","subSlot","replace","renderSlot","LEVELS","decrease","currentLevel","found","RESERVE_WIDTH","PageSizeCalculator","parentEle","scaled","LoadingStatus","SubmitPassword","AskForPasswordState","_super","verifyPassword","submitPassword","_this","AskingPassword","onDocumentAskPassword","password","setPassword","REQUIRE_PASSWORD","WRONG_PASSWORD","CompletedState","FailureState","error","LoadingState","percentages","DocumentLoader","characterMap","httpHeaders","renderError","renderLoader","transformGetDocumentParams","withCredentials","setPercentages","loadedDocument","setLoadedDocument","worker","PDFWorker","now","cMapUrl","cMapPacked","isCompressed","transformParams","getDocument","onPassword","reason","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","onProgress","total","loaded","err","destroyed","message","destroy","isDarkMode","matchMedia","withTheme","theme","onSwitchTheme","initialTheme","prevTheme","media","isSameUrl","a","typeA","typeB","every","v","Viewer","fileUrl","localization","_h","_j","_k","_l","shouldLoad","setFile","fileName","_m","prevFile","themeProps","_o","localizationContext","Provider","ps","Worker","workerUrl","GlobalWorkerOptions","workerSrc","isMac","test","navigator","platform"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar React = require('react');\nvar PdfJsApi = require('pdfjs-dist');\n\nfunction _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () { return e[k]; }\n                });\n            }\n        });\n    }\n    n[\"default\"] = e;\n    return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\nvar PdfJsApi__namespace = /*#__PURE__*/_interopNamespace(PdfJsApi);\n\nexports.AnnotationType = void 0;\n(function (AnnotationType) {\n    AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\n    AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\n    AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\n    AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\n    AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\n    AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\n    AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\n    AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\n    AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\n    AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\n    AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\n    AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\n    AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\n    AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\n    AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\n    AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\n    AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\n})(exports.AnnotationType || (exports.AnnotationType = {}));\n\nexports.LayerRenderStatus = void 0;\n(function (LayerRenderStatus) {\n    LayerRenderStatus[LayerRenderStatus[\"PreRender\"] = 0] = \"PreRender\";\n    LayerRenderStatus[LayerRenderStatus[\"DidRender\"] = 1] = \"DidRender\";\n})(exports.LayerRenderStatus || (exports.LayerRenderStatus = {}));\n\nexports.Position = void 0;\n(function (Position) {\n    Position[\"TopLeft\"] = \"TOP_LEFT\";\n    Position[\"TopCenter\"] = \"TOP_CENTER\";\n    Position[\"TopRight\"] = \"TOP_RIGHT\";\n    Position[\"RightTop\"] = \"RIGHT_TOP\";\n    Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n    Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n    Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n    Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n    Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n    Position[\"LeftTop\"] = \"LEFT_TOP\";\n    Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n    Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(exports.Position || (exports.Position = {}));\n\nexports.SpecialZoomLevel = void 0;\n(function (SpecialZoomLevel) {\n    SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n    SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n    SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(exports.SpecialZoomLevel || (exports.SpecialZoomLevel = {}));\n\nexports.ToggleStatus = void 0;\n(function (ToggleStatus) {\n    ToggleStatus[\"Close\"] = \"Close\";\n    ToggleStatus[\"Open\"] = \"Open\";\n    ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(exports.ToggleStatus || (exports.ToggleStatus = {}));\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nexports.TextDirection = void 0;\n(function (TextDirection) {\n    TextDirection[\"RightToLeft\"] = \"RTL\";\n    TextDirection[\"LeftToRight\"] = \"LTR\";\n})(exports.TextDirection || (exports.TextDirection = {}));\nvar ThemeContext = React__namespace.createContext({\n    currentTheme: 'light',\n    direction: exports.TextDirection.LeftToRight,\n    setCurrentTheme: function () { },\n});\n\nvar classNames = function (classes) {\n    var result = [];\n    Object.keys(classes).forEach(function (clazz) {\n        if (clazz && classes[clazz]) {\n            result.push(clazz);\n        }\n    });\n    return result.join(' ');\n};\n\nvar Button = function (_a) {\n    var children = _a.children, testId = _a.testId, onClick = _a.onClick;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = testId ? { 'data-testid': testId } : {};\n    return (React__namespace.createElement(\"button\", __assign({ className: classNames({\n            'rpv-core__button': true,\n            'rpv-core__button--rtl': isRtl,\n        }), type: \"button\", onClick: onClick }, attrs), children));\n};\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React__namespace.useLayoutEffect : React__namespace.useEffect;\n\nvar Menu = function (_a) {\n    var children = _a.children;\n    var containerRef = React__namespace.useRef();\n    var visibleMenuItemsRef = React__namespace.useRef([]);\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var handleKeyDown = function (e) {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        switch (e.key) {\n            case 'Tab':\n                e.preventDefault();\n                break;\n            case 'ArrowDown':\n                e.preventDefault();\n                moveToItem(function (_, currentIndex) { return currentIndex + 1; });\n                break;\n            case 'ArrowUp':\n                e.preventDefault();\n                moveToItem(function (_, currentIndex) { return currentIndex - 1; });\n                break;\n            case 'End':\n                e.preventDefault();\n                moveToItem(function (items, _) { return items.length - 1; });\n                break;\n            case 'Home':\n                e.preventDefault();\n                moveToItem(function (_, __) { return 0; });\n                break;\n        }\n    };\n    var moveToItem = function (getNextItem) {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var items = visibleMenuItemsRef.current;\n        var currentIndex = items.findIndex(function (item) { return item.getAttribute('tabindex') === '0'; });\n        var targetIndex = Math.min(items.length - 1, Math.max(0, getNextItem(items, currentIndex)));\n        if (currentIndex >= 0 && currentIndex <= items.length - 1) {\n            items[currentIndex].setAttribute('tabindex', '-1');\n        }\n        items[targetIndex].setAttribute('tabindex', '0');\n        items[targetIndex].focus();\n    };\n    var findVisibleItems = function (container) {\n        var visibleItems = [];\n        container.querySelectorAll('.rpv-core__menu-item[role=\"menuitem\"]').forEach(function (item) {\n            if (item instanceof HTMLElement) {\n                var parent_1 = item.parentElement;\n                if (parent_1 === container) {\n                    visibleItems.push(item);\n                }\n                else {\n                    if (window.getComputedStyle(parent_1).display !== 'none') {\n                        visibleItems.push(item);\n                    }\n                }\n            }\n        });\n        return visibleItems;\n    };\n    useIsomorphicLayoutEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var visibleItems = findVisibleItems(container);\n        visibleMenuItemsRef.current = visibleItems;\n    }, []);\n    useIsomorphicLayoutEffect(function () {\n        document.addEventListener('keydown', handleKeyDown);\n        return function () {\n            document.removeEventListener('keydown', handleKeyDown);\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { ref: containerRef, \"aria-orientation\": \"vertical\", className: classNames({\n            'rpv-core__menu': true,\n            'rpv-core__menu--rtl': isRtl,\n        }), role: \"menu\", tabIndex: 0 }, children));\n};\n\nvar MenuDivider = function () { return (React__namespace.createElement(\"div\", { \"aria-orientation\": \"horizontal\", className: \"rpv-core__menu-divider\", role: \"separator\" })); };\n\nvar Icon = function (_a) {\n    var children = _a.children, _b = _a.ignoreDirection, ignoreDirection = _b === void 0 ? false : _b, _c = _a.size, size = _c === void 0 ? 24 : _c;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = !ignoreDirection && direction === exports.TextDirection.RightToLeft;\n    var width = \"\".concat(size || 24, \"px\");\n    return (React__namespace.createElement(\"svg\", { \"aria-hidden\": \"true\", className: classNames({\n            'rpv-core__icon': true,\n            'rpv-core__icon--rtl': isRtl,\n        }), focusable: \"false\", height: width, viewBox: \"0 0 24 24\", width: width }, children));\n};\n\nvar CheckIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M23.5,0.499l-16.5,23l-6.5-6.5\" }))); };\n\nvar MenuItem = function (_a) {\n    var _b = _a.checked, checked = _b === void 0 ? false : _b, children = _a.children, _c = _a.icon, icon = _c === void 0 ? null : _c, _d = _a.isDisabled, isDisabled = _d === void 0 ? false : _d, testId = _a.testId, onClick = _a.onClick;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = testId ? { 'data-testid': testId } : {};\n    return (React__namespace.createElement(\"button\", __assign({ className: classNames({\n            'rpv-core__menu-item': true,\n            'rpv-core__menu-item--disabled': isDisabled,\n            'rpv-core__menu-item--ltr': !isRtl,\n            'rpv-core__menu-item--rtl': isRtl,\n        }), role: \"menuitem\", tabIndex: -1, type: \"button\", onClick: onClick }, attrs),\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__menu-item-icon': true,\n                'rpv-core__menu-item-icon--ltr': !isRtl,\n                'rpv-core__menu-item-icon--rtl': isRtl,\n            }) }, icon),\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__menu-item-label': true,\n                'rpv-core__menu-item-label--ltr': !isRtl,\n                'rpv-core__menu-item-label--rtl': isRtl,\n            }) }, children),\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__menu-item-check': true,\n                'rpv-core__menu-item-check--ltr': !isRtl,\n                'rpv-core__menu-item-check--rtl': isRtl,\n            }) }, checked && React__namespace.createElement(CheckIcon, null))));\n};\n\nvar MinimalButton = function (_a) {\n    var _b = _a.ariaLabel, ariaLabel = _b === void 0 ? '' : _b, _c = _a.ariaKeyShortcuts, ariaKeyShortcuts = _c === void 0 ? '' : _c, children = _a.children, _d = _a.isDisabled, isDisabled = _d === void 0 ? false : _d, _e = _a.isSelected, isSelected = _e === void 0 ? false : _e, testId = _a.testId, onClick = _a.onClick;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = testId ? { 'data-testid': testId } : {};\n    return (React__namespace.createElement(\"button\", __assign({ \"aria-label\": ariaLabel }, (ariaKeyShortcuts && { 'aria-keyshortcuts': ariaKeyShortcuts }), (isDisabled && { 'aria-disabled': true }), { className: classNames({\n            'rpv-core__minimal-button': true,\n            'rpv-core__minimal-button--disabled': isDisabled,\n            'rpv-core__minimal-button--rtl': isRtl,\n            'rpv-core__minimal-button--selected': isSelected,\n        }), type: \"button\", onClick: onClick }, attrs), children));\n};\n\nvar PrimaryButton = function (_a) {\n    var children = _a.children, testId = _a.testId, onClick = _a.onClick;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = testId ? { 'data-testid': testId } : {};\n    return (React__namespace.createElement(\"button\", __assign({ className: classNames({\n            'rpv-core__primary-button': true,\n            'rpv-core__primary-button--rtl': isRtl,\n        }), type: \"button\", onClick: onClick }, attrs), children));\n};\n\nvar ProgressBar = function (_a) {\n    var progress = _a.progress;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    return (React__namespace.createElement(\"div\", { className: classNames({\n            'rpv-core__progress-bar': true,\n            'rpv-core__progress-bar--rtl': isRtl,\n        }) },\n        React__namespace.createElement(\"div\", { className: \"rpv-core__progress-bar-progress\", style: { width: \"\".concat(progress, \"%\") } },\n            progress,\n            \"%\")));\n};\n\nvar Separator = function () { return React__namespace.createElement(\"div\", { className: \"rpv-core__separator\" }); };\n\nvar useIntersectionObserver = function (props) {\n    var containerRef = React__namespace.useRef(null);\n    var threshold = props.threshold, onVisibilityChanged = props.onVisibilityChanged;\n    useIsomorphicLayoutEffect(function () {\n        var io = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entry) {\n                var isVisible = entry.isIntersecting;\n                var ratio = entry.intersectionRatio;\n                onVisibilityChanged({ isVisible: isVisible, ratio: ratio });\n            });\n        }, {\n            threshold: threshold || 0,\n        });\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        io.observe(container);\n        return function () {\n            io.unobserve(container);\n        };\n    }, []);\n    return containerRef;\n};\n\nvar Spinner = function (_a) {\n    var _b = _a.size, size = _b === void 0 ? '4rem' : _b;\n    var _c = React__namespace.useState(false), visible = _c[0], setVisible = _c[1];\n    var handleVisibilityChanged = function (params) {\n        setVisible(params.isVisible);\n    };\n    var containerRef = useIntersectionObserver({\n        onVisibilityChanged: handleVisibilityChanged,\n    });\n    return (React__namespace.createElement(\"div\", { className: classNames({\n            'rpv-core__spinner': true,\n            'rpv-core__spinner--animating': visible,\n        }), ref: containerRef, style: { height: size, width: size } }));\n};\n\nvar Splitter = function (_a) {\n    var constrain = _a.constrain;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var resizerRef = React__namespace.useRef();\n    var leftSideRef = React__namespace.useRef();\n    var rightSideRef = React__namespace.useRef();\n    var xRef = React__namespace.useRef(0);\n    var yRef = React__namespace.useRef(0);\n    var leftWidthRef = React__namespace.useRef(0);\n    var resizerWidthRef = React__namespace.useRef(0);\n    var eventOptions = {\n        capture: true,\n    };\n    var handleMouseMove = function (e) {\n        var resizerEle = resizerRef.current;\n        var leftSide = leftSideRef.current;\n        var rightSide = rightSideRef.current;\n        if (!resizerEle || !leftSide || !rightSide) {\n            return;\n        }\n        var resizerWidth = resizerWidthRef.current;\n        var dx = e.clientX - xRef.current;\n        var firstHalfSize = leftWidthRef.current + (isRtl ? -dx : dx);\n        var containerWidth = resizerEle.parentElement.getBoundingClientRect().width;\n        var firstHalfPercentage = (firstHalfSize * 100) / containerWidth;\n        resizerEle.classList.add('rpv-core__splitter--resizing');\n        if (constrain) {\n            var secondHalfSize = containerWidth - firstHalfSize - resizerWidth;\n            var secondHalfPercentage = (secondHalfSize * 100) / containerWidth;\n            if (!constrain({ firstHalfPercentage: firstHalfPercentage, firstHalfSize: firstHalfSize, secondHalfPercentage: secondHalfPercentage, secondHalfSize: secondHalfSize })) {\n                return;\n            }\n        }\n        leftSide.style.width = \"\".concat(firstHalfPercentage, \"%\");\n        document.body.classList.add('rpv-core__splitter-body--resizing');\n        leftSide.classList.add('rpv-core__splitter-sibling--resizing');\n        rightSide.classList.add('rpv-core__splitter-sibling--resizing');\n    };\n    var handleMouseUp = function (e) {\n        var resizerEle = resizerRef.current;\n        var leftSide = leftSideRef.current;\n        var rightSide = rightSideRef.current;\n        if (!resizerEle || !leftSide || !rightSide) {\n            return;\n        }\n        document.body.classList.remove('rpv-core__splitter-body--resizing');\n        resizerEle.classList.remove('rpv-core__splitter--resizing');\n        leftSide.classList.remove('rpv-core__splitter-sibling--resizing');\n        rightSide.classList.remove('rpv-core__splitter-sibling--resizing');\n        document.removeEventListener('mousemove', handleMouseMove, eventOptions);\n        document.removeEventListener('mouseup', handleMouseUp, eventOptions);\n    };\n    var handleMouseDown = function (e) {\n        var leftSide = leftSideRef.current;\n        if (!leftSide) {\n            return;\n        }\n        xRef.current = e.clientX;\n        yRef.current = e.clientY;\n        leftWidthRef.current = leftSide.getBoundingClientRect().width;\n        document.addEventListener('mousemove', handleMouseMove, eventOptions);\n        document.addEventListener('mouseup', handleMouseUp, eventOptions);\n    };\n    React__namespace.useEffect(function () {\n        var resizerEle = resizerRef.current;\n        if (!resizerEle) {\n            return;\n        }\n        resizerWidthRef.current = resizerEle.getBoundingClientRect().width;\n        leftSideRef.current = resizerEle.previousElementSibling;\n        rightSideRef.current = resizerEle.nextElementSibling;\n    }, []);\n    return React__namespace.createElement(\"div\", { ref: resizerRef, className: \"rpv-core__splitter\", onMouseDown: handleMouseDown });\n};\n\nvar TextBox = function (_a) {\n    var _b = _a.ariaLabel, ariaLabel = _b === void 0 ? '' : _b, _c = _a.autoFocus, autoFocus = _c === void 0 ? false : _c, _d = _a.placeholder, placeholder = _d === void 0 ? '' : _d, testId = _a.testId, _e = _a.type, type = _e === void 0 ? 'text' : _e, _f = _a.value, value = _f === void 0 ? '' : _f, onChange = _a.onChange, _g = _a.onKeyDown, onKeyDown = _g === void 0 ? function () { } : _g;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var textboxRef = React__namespace.useRef();\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = {\n        ref: textboxRef,\n        'data-testid': '',\n        'aria-label': ariaLabel,\n        className: classNames({\n            'rpv-core__textbox': true,\n            'rpv-core__textbox--rtl': isRtl,\n        }),\n        placeholder: placeholder,\n        value: value,\n        onChange: function (e) { return onChange(e.target.value); },\n        onKeyDown: onKeyDown,\n    };\n    if (testId) {\n        attrs['data-testid'] = testId;\n    }\n    useIsomorphicLayoutEffect(function () {\n        if (autoFocus) {\n            var textboxEle = textboxRef.current;\n            if (textboxEle) {\n                var x = window.scrollX;\n                var y = window.scrollY;\n                textboxEle.focus();\n                window.scrollTo(x, y);\n            }\n        }\n    }, []);\n    return type === 'text' ? React__namespace.createElement(\"input\", __assign({ type: \"text\" }, attrs)) : React__namespace.createElement(\"input\", __assign({ type: \"password\" }, attrs));\n};\n\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\n    var clickHandler = function (e) {\n        var target = targetRef.current;\n        if (target && !target.contains(e.target)) {\n            onClickOutside();\n        }\n    };\n    React__namespace.useEffect(function () {\n        if (!closeOnClickOutside) {\n            return;\n        }\n        var eventOptions = {\n            capture: true,\n        };\n        document.addEventListener('click', clickHandler, eventOptions);\n        return function () {\n            document.removeEventListener('click', clickHandler, eventOptions);\n        };\n    }, []);\n};\n\nvar useEscape = function (handler) {\n    var keyUpHandler = function (e) {\n        if (e.key === 'Escape') {\n            handler();\n        }\n    };\n    React__namespace.useEffect(function () {\n        document.addEventListener('keyup', keyUpHandler);\n        return function () {\n            document.removeEventListener('keyup', keyUpHandler);\n        };\n    }, []);\n};\n\nvar useLockScroll = function () {\n    React__namespace.useEffect(function () {\n        var originalStyle = window.getComputedStyle(document.body).overflow;\n        document.body.style.overflow = 'hidden';\n        return function () {\n            document.body.style.overflow = originalStyle;\n        };\n    }, []);\n};\n\nvar ModalBody = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, onToggle = _a.onToggle;\n    var contentRef = React__namespace.useRef();\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    useLockScroll();\n    useEscape(function () {\n        if (contentRef.current && closeOnEscape) {\n            onToggle();\n        }\n    });\n    useClickOutside(closeOnClickOutside, contentRef, onToggle);\n    useIsomorphicLayoutEffect(function () {\n        var contentEle = contentRef.current;\n        if (!contentEle) {\n            return;\n        }\n        var maxHeight = document.body.clientHeight * 0.75;\n        if (contentEle.getBoundingClientRect().height >= maxHeight) {\n            contentEle.style.overflow = 'auto';\n            contentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n        }\n    }, []);\n    return (React__namespace.createElement(\"div\", { \"aria-modal\": \"true\", className: classNames({\n            'rpv-core__modal-body': true,\n            'rpv-core__modal-body--rtl': isRtl,\n        }), id: \"rpv-core__modal-body-\".concat(ariaControlsSuffix), ref: contentRef, role: \"dialog\", tabIndex: -1 }, children));\n};\n\nvar ModalOverlay = function (_a) {\n    var children = _a.children;\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__modal-overlay\" }, children);\n};\n\nvar useToggle = function (isOpened) {\n    var _a = React__namespace.useState(isOpened), opened = _a[0], setOpened = _a[1];\n    var toggle = function (status) {\n        switch (status) {\n            case exports.ToggleStatus.Close:\n                setOpened(false);\n                break;\n            case exports.ToggleStatus.Open:\n                setOpened(true);\n                break;\n            case exports.ToggleStatus.Toggle:\n            default:\n                setOpened(function (isOpened) { return !isOpened; });\n                break;\n        }\n    };\n    return { opened: opened, toggle: toggle };\n};\n\nvar Portal = function (_a) {\n    var content = _a.content, _b = _a.isOpened, isOpened = _b === void 0 ? false : _b, target = _a.target;\n    var _c = useToggle(isOpened), opened = _c.opened, toggle = _c.toggle;\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        target && target(toggle, opened),\n        opened && content(toggle)));\n};\n\nvar id = 0;\nvar uniqueId = function () { return id++; };\n\nvar Modal = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, _b = _a.isOpened, isOpened = _b === void 0 ? false : _b, target = _a.target;\n    var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\n    var renderTarget = function (toggle, opened) { return (React__namespace.createElement(\"div\", { \"aria-expanded\": opened ? 'true' : 'false', \"aria-haspopup\": \"dialog\", \"aria-controls\": \"rpv-core__modal-body-\".concat(controlsSuffix) }, target(toggle, opened))); };\n    var renderContent = function (toggle) { return (React__namespace.createElement(ModalOverlay, null,\n        React__namespace.createElement(ModalBody, { ariaControlsSuffix: controlsSuffix, closeOnClickOutside: closeOnClickOutside, closeOnEscape: closeOnEscape, onToggle: toggle }, content(toggle)))); };\n    return React__namespace.createElement(Portal, { target: target ? renderTarget : null, content: renderContent, isOpened: isOpened });\n};\n\nvar calculatePosition = function (content, target, position, offset) {\n    var targetRect = target.getBoundingClientRect();\n    var contentRect = content.getBoundingClientRect();\n    var height = contentRect.height, width = contentRect.width;\n    var top = 0;\n    var left = 0;\n    switch (position) {\n        case exports.Position.TopLeft:\n            top = targetRect.top - height;\n            left = targetRect.left;\n            break;\n        case exports.Position.TopCenter:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case exports.Position.TopRight:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case exports.Position.RightTop:\n            top = targetRect.top;\n            left = targetRect.left + targetRect.width;\n            break;\n        case exports.Position.RightCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left + targetRect.width;\n            break;\n        case exports.Position.RightBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left + targetRect.width;\n            break;\n        case exports.Position.BottomLeft:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left;\n            break;\n        case exports.Position.BottomCenter:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case exports.Position.BottomRight:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case exports.Position.LeftTop:\n            top = targetRect.top;\n            left = targetRect.left - width;\n            break;\n        case exports.Position.LeftCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left - width;\n            break;\n        case exports.Position.LeftBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left - width;\n            break;\n    }\n    return {\n        left: left + (offset.left || 0),\n        top: top + (offset.top || 0),\n    };\n};\n\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\n    useIsomorphicLayoutEffect(function () {\n        var targetEle = targetRef.current;\n        var contentEle = contentRef.current;\n        var anchorEle = anchorRef.current;\n        if (!contentEle || !targetEle || !anchorEle) {\n            return;\n        }\n        var anchorRect = anchorEle.getBoundingClientRect();\n        var _a = calculatePosition(contentEle, targetEle, position, offset), top = _a.top, left = _a.left;\n        contentEle.style.top = \"\".concat(top - anchorRect.top, \"px\");\n        contentEle.style.left = \"\".concat(left - anchorRect.left, \"px\");\n    }, []);\n};\n\nvar Arrow = function (_a) {\n    var _b;\n    var customClassName = _a.customClassName, position = _a.position;\n    return (React__namespace.createElement(\"div\", { className: classNames((_b = {\n                'rpv-core__arrow': true,\n                'rpv-core__arrow--tl': position === exports.Position.TopLeft,\n                'rpv-core__arrow--tc': position === exports.Position.TopCenter,\n                'rpv-core__arrow--tr': position === exports.Position.TopRight,\n                'rpv-core__arrow--rt': position === exports.Position.RightTop,\n                'rpv-core__arrow--rc': position === exports.Position.RightCenter,\n                'rpv-core__arrow--rb': position === exports.Position.RightBottom,\n                'rpv-core__arrow--bl': position === exports.Position.BottomLeft,\n                'rpv-core__arrow--bc': position === exports.Position.BottomCenter,\n                'rpv-core__arrow--br': position === exports.Position.BottomRight,\n                'rpv-core__arrow--lt': position === exports.Position.LeftTop,\n                'rpv-core__arrow--lc': position === exports.Position.LeftCenter,\n                'rpv-core__arrow--lb': position === exports.Position.LeftBottom\n            },\n            _b[\"\".concat(customClassName)] = customClassName !== '',\n            _b)) }));\n};\n\nvar PopoverBody = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, offset = _a.offset, position = _a.position, targetRef = _a.targetRef, onClose = _a.onClose;\n    var contentRef = React__namespace.useRef();\n    var innerRef = React__namespace.useRef();\n    var anchorRef = React__namespace.useRef();\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    useClickOutside(closeOnClickOutside, contentRef, onClose);\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\n    useIsomorphicLayoutEffect(function () {\n        var innerContentEle = innerRef.current;\n        if (!innerContentEle) {\n            return;\n        }\n        var maxHeight = document.body.clientHeight * 0.75;\n        if (innerContentEle.getBoundingClientRect().height >= maxHeight) {\n            innerContentEle.style.overflow = 'auto';\n            innerContentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n        }\n    }, []);\n    var innerId = \"rpv-core__popover-body-inner-\".concat(ariaControlsSuffix);\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\n        React__namespace.createElement(\"div\", { \"aria-describedby\": innerId, className: classNames({\n                'rpv-core__popover-body': true,\n                'rpv-core__popover-body--rtl': isRtl,\n            }), id: \"rpv-core__popover-body-\".concat(ariaControlsSuffix), ref: contentRef, role: \"dialog\", tabIndex: -1 },\n            React__namespace.createElement(Arrow, { customClassName: \"rpv-core__popover-body-arrow\", position: position }),\n            React__namespace.createElement(\"div\", { id: innerId, ref: innerRef }, children))));\n};\n\nvar PopoverOverlay = function (_a) {\n    var closeOnEscape = _a.closeOnEscape, onClose = _a.onClose;\n    var containerRef = React__namespace.useRef();\n    useEscape(function () {\n        if (containerRef.current && closeOnEscape) {\n            onClose();\n        }\n    });\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__popover-overlay\", ref: containerRef });\n};\n\nvar Popover = function (_a) {\n    var _b = _a.ariaHasPopup, ariaHasPopup = _b === void 0 ? 'dialog' : _b, ariaControlsSuffix = _a.ariaControlsSuffix, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, offset = _a.offset, position = _a.position, target = _a.target;\n    var _c = useToggle(false), opened = _c.opened, toggle = _c.toggle;\n    var targetRef = React__namespace.useRef();\n    var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\n    return (React__namespace.createElement(\"div\", { ref: targetRef, \"aria-expanded\": opened ? 'true' : 'false', \"aria-haspopup\": ariaHasPopup, \"aria-controls\": \"rpv-core__popver-body-\".concat(controlsSuffix) },\n        target(toggle, opened),\n        opened && (React__namespace.createElement(React__namespace.Fragment, null,\n            React__namespace.createElement(PopoverOverlay, { closeOnEscape: closeOnEscape, onClose: toggle }),\n            React__namespace.createElement(PopoverBody, { ariaControlsSuffix: controlsSuffix, closeOnClickOutside: closeOnClickOutside, offset: offset, position: position, targetRef: targetRef, onClose: toggle }, content(toggle))))));\n};\n\nvar TooltipBody = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, children = _a.children, contentRef = _a.contentRef, offset = _a.offset, position = _a.position, targetRef = _a.targetRef;\n    var anchorRef = React__namespace.useRef();\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__tooltip-body': true,\n                'rpv-core__tooltip-body--rtl': isRtl,\n            }), id: \"rpv-core__tooltip-body-\".concat(ariaControlsSuffix), ref: contentRef, role: \"tooltip\" },\n            React__namespace.createElement(Arrow, { customClassName: \"rpv-core__tooltip-body-arrow\", position: position }),\n            React__namespace.createElement(\"div\", { className: \"rpv-core__tooltip-body-content\" }, children))));\n};\n\nvar Tooltip = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, content = _a.content, offset = _a.offset, position = _a.position, target = _a.target;\n    var _b = useToggle(false), opened = _b.opened, toggle = _b.toggle;\n    var targetRef = React__namespace.useRef();\n    var contentRef = React__namespace.useRef();\n    var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\n    useEscape(function () {\n        if (targetRef.current && document.activeElement && targetRef.current.contains(document.activeElement)) {\n            close();\n        }\n    });\n    var open = function () {\n        toggle(exports.ToggleStatus.Open);\n    };\n    var close = function () {\n        toggle(exports.ToggleStatus.Close);\n    };\n    var onBlur = function (e) {\n        var shouldHideTooltip = e.relatedTarget instanceof HTMLElement &&\n            e.currentTarget.parentElement &&\n            e.currentTarget.parentElement.contains(e.relatedTarget);\n        if (shouldHideTooltip) {\n            if (contentRef.current) {\n                contentRef.current.style.display = 'none';\n            }\n        }\n        else {\n            close();\n        }\n    };\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", { ref: targetRef, \"aria-describedby\": \"rpv-core__tooltip-body-\".concat(controlsSuffix), onBlur: onBlur, onFocus: open, onMouseEnter: open, onMouseLeave: close }, target),\n        opened && (React__namespace.createElement(TooltipBody, { ariaControlsSuffix: controlsSuffix, contentRef: contentRef, offset: offset, position: position, targetRef: targetRef }, content()))));\n};\n\nfunction createStore(initialState) {\n    var state = initialState || {};\n    var listeners = {};\n    return {\n        subscribe: function (key, handler) {\n            listeners[key] = (listeners[key] || []).concat(handler);\n        },\n        unsubscribe: function (key, handler) {\n            listeners[key] = (listeners[key] || []).filter(function (f) { return f !== handler; });\n        },\n        update: function (key, data) {\n            var _a;\n            state = __assign(__assign({}, state), (_a = {}, _a[key] = data, _a));\n            (listeners[key] || []).forEach(function (handler) { return handler(state[key]); });\n        },\n        get: function (key) {\n            return state[key];\n        },\n    };\n}\n\nvar core = {\n\taskingPassword: {\n\t\trequirePasswordToOpen: \"This document requires a password to open\",\n\t\tsubmit: \"Submit\"\n\t},\n\twrongPassword: {\n\t\ttryAgain: \"The password is wrong. Please try again\"\n\t},\n\tpageLabel: \"Page {{pageIndex}}\"\n};\nvar enUs = {\n\tcore: core\n};\n\nvar DefaultLocalization = enUs;\nvar LocalizationContext = React__namespace.createContext({\n    l10n: DefaultLocalization,\n    setL10n: function () { },\n});\n\nfunction usePrevious(value) {\n    var ref = React__namespace.useRef(value);\n    React__namespace.useEffect(function () {\n        ref.current = value;\n    }, [value]);\n    return ref.current;\n}\n\nvar useTrackResize = function (_a) {\n    var targetRef = _a.targetRef, onResize = _a.onResize;\n    useIsomorphicLayoutEffect(function () {\n        var io = new ResizeObserver(function (entries) {\n            entries.forEach(function (entry) {\n                onResize(entry.target);\n            });\n        });\n        var container = targetRef.current;\n        if (!container) {\n            return;\n        }\n        io.observe(container);\n        return function () {\n            io.unobserve(container);\n        };\n    }, []);\n};\n\nvar AnnotationBorderStyleType;\n(function (AnnotationBorderStyleType) {\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\n\nvar dateRegex = new RegExp('^D:' +\n    '(\\\\d{4})' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '([Z|+|-])?' +\n    '(\\\\d{2})?' +\n    \"'?\" +\n    '(\\\\d{2})?' +\n    \"'?\");\nvar parse = function (value, min, max, defaultValue) {\n    var parsed = parseInt(value, 10);\n    return parsed >= min && parsed <= max ? parsed : defaultValue;\n};\nvar convertDate = function (input) {\n    var matches = dateRegex.exec(input);\n    if (!matches) {\n        return null;\n    }\n    var year = parseInt(matches[1], 10);\n    var month = parse(matches[2], 1, 12, 1) - 1;\n    var day = parse(matches[3], 1, 31, 1);\n    var hour = parse(matches[4], 0, 23, 0);\n    var minute = parse(matches[5], 0, 59, 0);\n    var second = parse(matches[6], 0, 59, 0);\n    var universalTimeRelation = matches[7] || 'Z';\n    var offsetHour = parse(matches[8], 0, 23, 0);\n    var offsetMinute = parse(matches[9], 0, 59, 0);\n    switch (universalTimeRelation) {\n        case '-':\n            hour += offsetHour;\n            minute += offsetMinute;\n            break;\n        case '+':\n            hour -= offsetHour;\n            minute -= offsetMinute;\n            break;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar PopupWrapper = function (_a) {\n    var annotation = _a.annotation;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var containerRef = React__namespace.useRef();\n    var dateStr = '';\n    if (annotation.modificationDate) {\n        var date = convertDate(annotation.modificationDate);\n        dateStr = date ? \"\".concat(date.toLocaleDateString(), \", \").concat(date.toLocaleTimeString()) : '';\n    }\n    React__namespace.useLayoutEffect(function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var annotationEle = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n        if (!annotationEle) {\n            return;\n        }\n        var ele = annotationEle;\n        ele.style.zIndex += 1;\n        return function () {\n            ele.style.zIndex = \"\".concat(parseInt(ele.style.zIndex, 10) - 1);\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { ref: containerRef, className: classNames({\n            'rpv-core__annotation-popup-wrapper': true,\n            'rpv-core__annotation-popup-wrapper--rtl': isRtl,\n        }), style: {\n            top: annotation.annotationType === exports.AnnotationType.Popup ? '' : '100%',\n        } },\n        annotation.title && (React__namespace.createElement(React__namespace.Fragment, null,\n            React__namespace.createElement(\"div\", { className: classNames({\n                    'rpv-core__annotation-popup-title': true,\n                    'rpv-core__annotation-popup-title--ltr': !isRtl,\n                    'rpv-core__annotation-popup-title--rtl': isRtl,\n                }) }, annotation.title),\n            React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-popup-date\" }, dateStr))),\n        annotation.contents && (React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-popup-content\" }, annotation.contents.split('\\n').map(function (item, index) { return (React__namespace.createElement(React__namespace.Fragment, { key: index },\n            item,\n            React__namespace.createElement(\"br\", null))); })))));\n};\n\nvar TogglePopupBy;\n(function (TogglePopupBy) {\n    TogglePopupBy[\"Click\"] = \"Click\";\n    TogglePopupBy[\"Hover\"] = \"Hover\";\n})(TogglePopupBy || (TogglePopupBy = {}));\nvar useTogglePopup = function () {\n    var _a = useToggle(false), opened = _a.opened, toggle = _a.toggle;\n    var _b = React__namespace.useState(TogglePopupBy.Hover), togglePopupBy = _b[0], setTooglePopupBy = _b[1];\n    var toggleOnClick = function () {\n        switch (togglePopupBy) {\n            case TogglePopupBy.Click:\n                opened && setTooglePopupBy(TogglePopupBy.Hover);\n                toggle(exports.ToggleStatus.Toggle);\n                break;\n            case TogglePopupBy.Hover:\n                setTooglePopupBy(TogglePopupBy.Click);\n                toggle(exports.ToggleStatus.Open);\n                break;\n        }\n    };\n    var openOnHover = function () {\n        togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Open);\n    };\n    var closeOnHover = function () {\n        togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Close);\n    };\n    return {\n        opened: opened,\n        closeOnHover: closeOnHover,\n        openOnHover: openOnHover,\n        toggleOnClick: toggleOnClick,\n    };\n};\n\nvar Annotation = function (_a) {\n    var annotation = _a.annotation, children = _a.children, ignoreBorder = _a.ignoreBorder, hasPopup = _a.hasPopup, isRenderable = _a.isRenderable, page = _a.page, viewport = _a.viewport;\n    var rect = annotation.rect;\n    var _b = useTogglePopup(), closeOnHover = _b.closeOnHover, opened = _b.opened, openOnHover = _b.openOnHover, toggleOnClick = _b.toggleOnClick;\n    var normalizeRect = function (r) { return [\n        Math.min(r[0], r[2]),\n        Math.min(r[1], r[3]),\n        Math.max(r[0], r[2]),\n        Math.max(r[1], r[3]),\n    ]; };\n    var bound = normalizeRect([\n        rect[0],\n        page.view[3] + page.view[1] - rect[1],\n        rect[2],\n        page.view[3] + page.view[1] - rect[3],\n    ]);\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var styles = {\n        borderColor: '',\n        borderRadius: '',\n        borderStyle: '',\n        borderWidth: '',\n    };\n    if (!ignoreBorder && annotation.borderStyle.width > 0) {\n        switch (annotation.borderStyle.style) {\n            case AnnotationBorderStyleType.Dashed:\n                styles.borderStyle = 'dashed';\n                break;\n            case AnnotationBorderStyleType.Solid:\n                styles.borderStyle = 'solid';\n                break;\n            case AnnotationBorderStyleType.Underline:\n                styles = Object.assign({\n                    borderBottomStyle: 'solid',\n                }, styles);\n                break;\n            case AnnotationBorderStyleType.Beveled:\n            case AnnotationBorderStyleType.Inset:\n        }\n        var borderWidth = annotation.borderStyle.width;\n        styles.borderWidth = \"\".concat(borderWidth, \"px\");\n        if (annotation.borderStyle.style !== AnnotationBorderStyleType.Underline) {\n            width = width - 2 * borderWidth;\n            height = height - 2 * borderWidth;\n        }\n        var _c = annotation.borderStyle, horizontalCornerRadius = _c.horizontalCornerRadius, verticalCornerRadius = _c.verticalCornerRadius;\n        if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\n            styles.borderRadius = \"\".concat(horizontalCornerRadius, \"px / \").concat(verticalCornerRadius, \"px\");\n        }\n        annotation.color\n            ? (styles.borderColor = \"rgb(\".concat(annotation.color[0] | 0, \", \").concat(annotation.color[1] | 0, \", \").concat(annotation.color[2] | 0, \")\"))\n            :\n                (styles.borderWidth = '0');\n    }\n    return (React__namespace.createElement(React__namespace.Fragment, null, isRenderable &&\n        children({\n            popup: {\n                opened: opened,\n                closeOnHover: closeOnHover,\n                openOnHover: openOnHover,\n                toggleOnClick: toggleOnClick,\n            },\n            slot: {\n                attrs: {\n                    style: Object.assign({\n                        height: \"\".concat(height, \"px\"),\n                        left: \"\".concat(bound[0], \"px\"),\n                        top: \"\".concat(bound[1], \"px\"),\n                        transform: \"matrix(\".concat(viewport.transform.join(','), \")\"),\n                        transformOrigin: \"-\".concat(bound[0], \"px -\").concat(bound[1], \"px\"),\n                        width: \"\".concat(width, \"px\"),\n                    }, styles),\n                },\n                children: React__namespace.createElement(React__namespace.Fragment, null, hasPopup && opened && React__namespace.createElement(PopupWrapper, { annotation: annotation })),\n            },\n        })));\n};\n\nvar Caret = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--caret\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Circle = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--circle\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"circle\", { cy: height / 2, fill: \"none\", rx: width / 2 - borderWidth / 2, ry: height / 2 - borderWidth / 2, stroke: \"transparent\", strokeWidth: borderWidth || 1 })),\n        props.slot.children)); }));\n};\n\nvar getFileName = function (url) {\n    var str = url.split('/').pop();\n    return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n    var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], { type: '' }));\n    var link = document.createElement('a');\n    link.style.display = 'none';\n    link.href = blobUrl || url;\n    link.setAttribute('download', getFileName(url));\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    if (blobUrl) {\n        URL.revokeObjectURL(blobUrl);\n    }\n};\n\nvar FileAttachment = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false && (!!annotation.title || !!annotation.contents);\n    var doubleClick = function () {\n        var file = annotation.file;\n        file && downloadFile(file.filename, file.content);\n    };\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: true, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--file-attachment\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onDoubleClick: doubleClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar FreeText = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--free-text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Popup = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var isRenderable = !!(annotation.title || annotation.contents);\n    var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\n    var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\n    useIsomorphicLayoutEffect(function () {\n        if (!annotation.parentId) {\n            return;\n        }\n        var parent = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.parentId, \"\\\"]\"));\n        var container = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n        if (!parent || !container) {\n            return;\n        }\n        var left = parseFloat(parent.style.left);\n        var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\n        container.style.left = \"\".concat(left, \"px\");\n        container.style.top = \"\".concat(top, \"px\");\n        container.style.transformOrigin = \"-\".concat(left, \"px -\").concat(top, \"px\");\n    }, []);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--popup\", \"data-annotation-id\": annotation.id }),\n        React__namespace.createElement(PopupWrapper, { annotation: annotation }))); }));\n};\n\nvar Highlight = function (_a) {\n    var annotation = _a.annotation, childAnnotation = _a.childAnnotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var hasQuadPoints = annotation.quadPoints && annotation.quadPoints.length > 0;\n    if (hasQuadPoints) {\n        var annotations = annotation.quadPoints.map(function (quadPoint) {\n            return Object.assign({}, annotation, {\n                rect: [quadPoint[2].x, quadPoint[2].y, quadPoint[1].x, quadPoint[1].y],\n                quadPoints: [],\n            });\n        });\n        return (React__namespace.createElement(React__namespace.Fragment, null, annotations.map(function (ann, index) { return (React__namespace.createElement(Highlight, { key: index, annotation: ann, childAnnotation: childAnnotation, page: page, viewport: viewport })); })));\n    }\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--highlight\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children),\n        childAnnotation &&\n            childAnnotation.annotationType === exports.AnnotationType.Popup &&\n            props.popup.opened && React__namespace.createElement(Popup, { annotation: childAnnotation, page: page, viewport: viewport }))); }));\n};\n\nvar Ink = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--ink\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.inkLists && annotation.inkLists.length && (React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") }, annotation.inkLists.map(function (inkList, index) { return (React__namespace.createElement(\"polyline\", { key: index, fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: inkList.map(function (item) { return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y); }).join(' ') })); }))),\n        props.slot.children)); }));\n};\n\nvar Line = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--line\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"line\", { stroke: \"transparent\", strokeWidth: borderWidth || 1, x1: rect[2] - annotation.lineCoordinates[0], x2: rect[2] - annotation.lineCoordinates[2], y1: rect[3] - annotation.lineCoordinates[1], y2: rect[3] - annotation.lineCoordinates[3] })),\n        props.slot.children)); }));\n};\n\nvar normalizeDestination = function (pageIndex, destArray) {\n    switch (destArray[1].name) {\n        case 'XYZ':\n            return {\n                bottomOffset: destArray[3],\n                leftOffset: destArray[2] || 0,\n                pageIndex: pageIndex,\n                scaleTo: destArray[4],\n            };\n        case 'Fit':\n        case 'FitB':\n            return {\n                bottomOffset: 0,\n                leftOffset: 0,\n                pageIndex: pageIndex,\n                scaleTo: exports.SpecialZoomLevel.PageFit,\n            };\n        case 'FitH':\n        case 'FitBH':\n            return {\n                bottomOffset: destArray[2],\n                leftOffset: 0,\n                pageIndex: pageIndex,\n                scaleTo: exports.SpecialZoomLevel.PageWidth,\n            };\n        default:\n            return {\n                bottomOffset: 0,\n                leftOffset: 0,\n                pageIndex: pageIndex,\n                scaleTo: 1,\n            };\n    }\n};\nvar pageOutlinesMap = new Map();\nvar pagesMap = new Map();\nvar generateRefKey = function (outline) { return \"\".concat(outline.num, \"R\").concat(outline.gen === 0 ? '' : outline.gen); };\nvar getPageIndex = function (outline) { return pageOutlinesMap.get(generateRefKey(outline)) || null; };\nvar cacheOutlineRef = function (outline, pageIndex) {\n    pageOutlinesMap.set(generateRefKey(outline), pageIndex);\n};\nvar clearPagesCache = function () {\n    pageOutlinesMap.clear();\n    pagesMap.clear();\n};\nvar getPage = function (doc, pageIndex) {\n    if (!doc) {\n        return Promise.reject('The document is not loaded yet');\n    }\n    var page = pagesMap.get(pageIndex);\n    if (page) {\n        return Promise.resolve(page);\n    }\n    return new Promise(function (resolve, _) {\n        doc.getPage(pageIndex + 1).then(function (page) {\n            pagesMap.set(pageIndex, page);\n            if (page.ref) {\n                cacheOutlineRef(page.ref, pageIndex);\n            }\n            resolve(page);\n        });\n    });\n};\nvar getDestination = function (doc, dest) {\n    return new Promise(function (res) {\n        new Promise(function (resolve) {\n            if (typeof dest === 'string') {\n                doc.getDestination(dest).then(function (destArray) {\n                    resolve(destArray);\n                });\n            }\n            else {\n                resolve(dest);\n            }\n        }).then(function (destArray) {\n            if ('object' === typeof destArray[0] && destArray[0] !== null) {\n                var outlineRef_1 = destArray[0];\n                var pageIndex = getPageIndex(outlineRef_1);\n                if (pageIndex === null) {\n                    doc.getPageIndex(outlineRef_1).then(function (pageIndex) {\n                        cacheOutlineRef(outlineRef_1, pageIndex);\n                        getDestination(doc, dest).then(function (result) { return res(result); });\n                    });\n                }\n                else {\n                    res(normalizeDestination(pageIndex, destArray));\n                }\n            }\n            else {\n                var target = normalizeDestination(destArray[0], destArray);\n                res(target);\n            }\n        });\n    });\n};\n\nvar Link = function (_a) {\n    var annotation = _a.annotation, doc = _a.doc, page = _a.page, viewport = _a.viewport, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var link = function (e) {\n        e.preventDefault();\n        annotation.action\n            ? onExecuteNamedAction(annotation.action)\n            : getDestination(doc, annotation.dest).then(function (target) {\n                var pageIndex = target.pageIndex, bottomOffset = target.bottomOffset, leftOffset = target.leftOffset, scaleTo = target.scaleTo;\n                onJumpToDest(pageIndex, bottomOffset, leftOffset, scaleTo);\n            });\n    };\n    var isRenderable = !!(annotation.url || annotation.dest || annotation.action);\n    var attrs = annotation.url\n        ? {\n            href: annotation.url,\n            rel: 'noopener noreferrer nofollow',\n            target: annotation.newWindow ? '_blank' : '',\n            title: annotation.url,\n        }\n        : {\n            href: '',\n            'data-annotation-link-dest': annotation.dest,\n            onClick: link,\n        };\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: false, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--link\", \"data-annotation-id\": annotation.id }),\n        React__namespace.createElement(\"a\", __assign({}, attrs)))); }));\n};\n\nvar Polygon = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--polygon\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.vertices && annotation.vertices.length && (React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"polygon\", { fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: annotation.vertices\n                    .map(function (item) { return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y); })\n                    .join(' ') }))),\n        props.slot.children)); }));\n};\n\nvar Polyline = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--polyline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.vertices && annotation.vertices.length && (React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"polyline\", { fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: annotation.vertices\n                    .map(function (item) { return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y); })\n                    .join(' ') }))),\n        props.slot.children)); }));\n};\n\nvar Square = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--square\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"rect\", { height: height - borderWidth, fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, x: borderWidth / 2, y: borderWidth / 2, width: width - borderWidth })),\n        props.slot.children)); }));\n};\n\nvar Squiggly = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--squiggly\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Stamp = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--stamp\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar StrikeOut = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--strike-out\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar CommentIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25\" }),\n    React__namespace.createElement(\"path\", { d: \"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75\" }),\n    React__namespace.createElement(\"path\", { d: \"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25\" }))); };\n\nvar HelpIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M21.423 5.406L17.415 9.414\" }),\n    React__namespace.createElement(\"path\", { d: \"M14.587 6.585L18.607 2.565\" }),\n    React__namespace.createElement(\"path\", { d: \"M5.405 21.424L9.413 17.416\" }),\n    React__namespace.createElement(\"path\", { d: \"M6.585 14.588L2.577 18.596\" }),\n    React__namespace.createElement(\"path\", { d: \"M18.602 21.419L14.595 17.412\" }),\n    React__namespace.createElement(\"path\", { d: \"M17.419 14.58L21.428 18.589\" }),\n    React__namespace.createElement(\"path\", { d: \"M2.582 5.399L6.588 9.406\" }),\n    React__namespace.createElement(\"path\", { d: \"M9.421 6.581L5.412 2.572\" }))); };\n\nvar KeyIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z\" }))); };\n\nvar NoteIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M6 4.5L6 0.5\" }),\n    React__namespace.createElement(\"path\", { d: \"M18 4.5L18 0.5\" }),\n    React__namespace.createElement(\"path\", { d: \"M10 4.5L10 0.5\" }),\n    React__namespace.createElement(\"path\", { d: \"M14 4.5L14 0.5\" }))); };\n\nvar ParagraphIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M17.5 0.498L17.5 23.498\" }),\n    React__namespace.createElement(\"path\", { d: \"M10.5 0.498L10.5 23.498\" }),\n    React__namespace.createElement(\"path\", { d: \"M23.5.5H6.5a6,6,0,0,0,0,12h4\" }))); };\n\nvar TriangleIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z\" }))); };\n\nvar Text = function (_a) {\n    var annotation = _a.annotation, childAnnotation = _a.childAnnotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var name = annotation.name ? annotation.name.toLowerCase() : '';\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n            name && (React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-text-icon\" },\n                name === 'check' && React__namespace.createElement(CheckIcon, null),\n                name === 'comment' && React__namespace.createElement(CommentIcon, null),\n                name === 'help' && React__namespace.createElement(HelpIcon, null),\n                name === 'insert' && React__namespace.createElement(TriangleIcon, null),\n                name === 'key' && React__namespace.createElement(KeyIcon, null),\n                name === 'note' && React__namespace.createElement(NoteIcon, null),\n                (name === 'newparagraph' || name === 'paragraph') && React__namespace.createElement(ParagraphIcon, null))),\n            props.slot.children),\n        childAnnotation &&\n            childAnnotation.annotationType === exports.AnnotationType.Popup &&\n            props.popup.opened && React__namespace.createElement(Popup, { annotation: childAnnotation, page: page, viewport: viewport }))); }));\n};\n\nvar Underline = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--underline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar AnnotationLayerBody = function (_a) {\n    var annotations = _a.annotations, containerRef = _a.containerRef, doc = _a.doc, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var viewport = page.getViewport({ rotation: rotation, scale: scale });\n    var clonedViewPort = viewport.clone({ dontFlip: true });\n    var filterAnnotations = annotations.filter(function (annotation) { return !annotation.parentId; });\n    React__namespace.useEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        plugins.forEach(function (plugin) {\n            if (plugin.onAnnotationLayerRender) {\n                plugin.onAnnotationLayerRender({\n                    annotations: filterAnnotations,\n                    container: container,\n                    pageIndex: pageIndex,\n                    rotation: rotation,\n                    scale: scale,\n                });\n            }\n        });\n    }, []);\n    return (React__namespace.createElement(React__namespace.Fragment, null, filterAnnotations.map(function (annotation) {\n        var childAnnotation = annotations.find(function (item) { return item.parentId === annotation.id; });\n        switch (annotation.annotationType) {\n            case exports.AnnotationType.Caret:\n                return (React__namespace.createElement(Caret, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Circle:\n                return (React__namespace.createElement(Circle, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.FileAttachment:\n                return (React__namespace.createElement(FileAttachment, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.FreeText:\n                return (React__namespace.createElement(FreeText, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Highlight:\n                return (React__namespace.createElement(Highlight, { key: annotation.id, annotation: annotation, childAnnotation: childAnnotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Ink:\n                return (React__namespace.createElement(Ink, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Line:\n                return (React__namespace.createElement(Line, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Link:\n                return (React__namespace.createElement(Link, { key: annotation.id, annotation: annotation, doc: doc, page: page, viewport: clonedViewPort, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest }));\n            case exports.AnnotationType.Polygon:\n                return (React__namespace.createElement(Polygon, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Polyline:\n                return (React__namespace.createElement(Polyline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Popup:\n                return (React__namespace.createElement(Popup, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Square:\n                return (React__namespace.createElement(Square, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Squiggly:\n                return (React__namespace.createElement(Squiggly, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Stamp:\n                return (React__namespace.createElement(Stamp, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.StrikeOut:\n                return (React__namespace.createElement(StrikeOut, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Text:\n                return (React__namespace.createElement(Text, { key: annotation.id, annotation: annotation, childAnnotation: childAnnotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Underline:\n                return (React__namespace.createElement(Underline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            default:\n                return React__namespace.createElement(React__namespace.Fragment, { key: annotation.id });\n        }\n    })));\n};\n\nvar AnnotationLoader = function (_a) {\n    var page = _a.page, renderAnnotations = _a.renderAnnotations;\n    var _b = React__namespace.useState({\n        loading: true,\n        annotations: [],\n    }), status = _b[0], setStatus = _b[1];\n    React__namespace.useEffect(function () {\n        page.getAnnotations({ intent: 'display' }).then(function (result) {\n            setStatus({\n                loading: false,\n                annotations: result,\n            });\n        });\n    }, []);\n    return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : renderAnnotations(status.annotations);\n};\n\nvar AnnotationLayer = function (_a) {\n    var doc = _a.doc, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var containerRef = React__namespace.useRef();\n    var renderAnnotations = function (annotations) {\n        return (React__namespace.createElement(AnnotationLayerBody, { annotations: annotations, containerRef: containerRef, doc: doc, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotation, scale: scale, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest }));\n    };\n    return (React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-core__annotation-layer\" },\n        React__namespace.createElement(AnnotationLoader, { page: page, renderAnnotations: renderAnnotations })));\n};\n\nvar useIsMounted = function () {\n    var isMountedRef = React__namespace.useRef(false);\n    React__namespace.useEffect(function () {\n        isMountedRef.current = true;\n        return function () {\n            isMountedRef.current = false;\n        };\n    }, []);\n    return isMountedRef;\n};\n\nvar WithScale = function (_a) {\n    var callback = _a.callback, children = _a.children, rotation = _a.rotation, scale = _a.scale;\n    useIsomorphicLayoutEffect(function () {\n        callback();\n    }, [rotation, scale]);\n    return React__namespace.createElement(React__namespace.Fragment, null, children);\n};\n\nvar CanvasLayer = function (_a) {\n    var height = _a.height, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, width = _a.width;\n    var isMounted = useIsMounted();\n    var canvasRef = React__namespace.useRef();\n    var renderTask = React__namespace.useRef();\n    var _b = React__namespace.useState(false), rendered = _b[0], setRendered = _b[1];\n    var devicePixelRatio = window.devicePixelRatio || 1;\n    var renderCanvas = function () {\n        setRendered(false);\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvasEle = canvasRef.current;\n        plugins.forEach(function (plugin) {\n            if (plugin.onCanvasLayerRender) {\n                plugin.onCanvasLayerRender({\n                    ele: canvasEle,\n                    pageIndex: pageIndex,\n                    rotation: rotation,\n                    scale: scale,\n                    status: exports.LayerRenderStatus.PreRender,\n                });\n            }\n        });\n        canvasEle.height = height * devicePixelRatio;\n        canvasEle.width = width * devicePixelRatio;\n        canvasEle.style.opacity = '0';\n        var canvasContext = canvasEle.getContext('2d', {\n            alpha: false,\n        });\n        var viewport = page.getViewport({\n            rotation: rotation,\n            scale: scale * devicePixelRatio,\n        });\n        renderTask.current = page.render({ canvasContext: canvasContext, viewport: viewport });\n        renderTask.current.promise.then(function () {\n            isMounted.current && setRendered(true);\n            canvasEle.style.removeProperty('opacity');\n            plugins.forEach(function (plugin) {\n                if (plugin.onCanvasLayerRender) {\n                    plugin.onCanvasLayerRender({\n                        ele: canvasEle,\n                        pageIndex: pageIndex,\n                        rotation: rotation,\n                        scale: scale,\n                        status: exports.LayerRenderStatus.DidRender,\n                    });\n                }\n            });\n        }, function () {\n            isMounted.current && setRendered(true);\n        });\n    };\n    return (React__namespace.createElement(WithScale, { callback: renderCanvas, rotation: rotation, scale: scale },\n        React__namespace.createElement(\"div\", { className: \"rpv-core__canvas-layer\", style: {\n                height: \"\".concat(height, \"px\"),\n                width: \"\".concat(width, \"px\"),\n            } },\n            !rendered && (React__namespace.createElement(\"div\", { className: \"rpv-core__canvas-layer-loader\" },\n                React__namespace.createElement(Spinner, null))),\n            React__namespace.createElement(\"canvas\", { ref: canvasRef, style: {\n                    transform: \"scale(\".concat(1 / devicePixelRatio, \")\"),\n                    transformOrigin: \"top left\",\n                } }))));\n};\n\nvar SvgLayer = function (_a) {\n    var height = _a.height, page = _a.page, rotation = _a.rotation, scale = _a.scale, width = _a.width;\n    var containerRef = React__namespace.useRef();\n    var empty = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        containerEle.innerHTML = '';\n    };\n    var renderSvg = function () {\n        var containerEle = containerRef.current;\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        page.getOperatorList().then(function (operatorList) {\n            empty();\n            var graphic = new PdfJsApi__namespace.SVGGraphics(page.commonObjs, page.objs);\n            graphic.getSVG(operatorList, viewport).then(function (svg) {\n                svg.style.height = \"\".concat(height, \"px\");\n                svg.style.width = \"\".concat(width, \"px\");\n                containerEle.appendChild(svg);\n            });\n        });\n    };\n    return (React__namespace.createElement(WithScale, { callback: renderSvg, rotation: rotation, scale: scale },\n        React__namespace.createElement(\"div\", { className: \"rpv-core__svg-layer\", ref: containerRef })));\n};\n\nvar TextLayer = function (_a) {\n    var page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale;\n    var containerRef = React__namespace.useRef();\n    var renderTask = React__namespace.useRef();\n    var empty = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var spans = [].slice.call(containerEle.querySelectorAll('span.rpv-core__text-layer-text'));\n        spans.forEach(function (span) { return containerEle.removeChild(span); });\n        var breaks = [].slice.call(containerEle.querySelectorAll('br[role=\"presentation\"]'));\n        breaks.forEach(function (br) { return containerEle.removeChild(br); });\n    };\n    var renderText = function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        containerEle.removeAttribute('data-testid');\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        plugins.forEach(function (plugin) {\n            if (plugin.onTextLayerRender) {\n                plugin.onTextLayerRender({\n                    ele: containerEle,\n                    pageIndex: pageIndex,\n                    scale: scale,\n                    status: exports.LayerRenderStatus.PreRender,\n                });\n            }\n        });\n        page.getTextContent().then(function (textContent) {\n            empty();\n            renderTask.current = PdfJsApi__namespace.renderTextLayer({\n                container: containerEle,\n                textContent: textContent,\n                viewport: viewport,\n                enhanceTextSelection: true,\n            });\n            renderTask.current.promise.then(function () {\n                containerEle.setAttribute('data-testid', \"core__text-layer-\".concat(pageIndex));\n                var spans = [].slice.call(containerEle.children);\n                spans.forEach(function (span) { return span.classList.add('rpv-core__text-layer-text'); });\n                plugins.forEach(function (plugin) {\n                    if (plugin.onTextLayerRender) {\n                        plugin.onTextLayerRender({\n                            ele: containerEle,\n                            pageIndex: pageIndex,\n                            scale: scale,\n                            status: exports.LayerRenderStatus.DidRender,\n                        });\n                    }\n                });\n            }, function () {\n                containerEle.removeAttribute('data-testid');\n            });\n        });\n    };\n    return (React__namespace.createElement(WithScale, { callback: renderText, rotation: rotation, scale: scale },\n        React__namespace.createElement(\"div\", { className: \"rpv-core__text-layer\", ref: containerRef })));\n};\n\nvar NUMBER_OF_OVERSCAN_PAGES = 2;\nvar PageLayer = function (_a) {\n    var currentPage = _a.currentPage, doc = _a.doc, height = _a.height, pageIndex = _a.pageIndex, plugins = _a.plugins, renderPage = _a.renderPage, rotation = _a.rotation, scale = _a.scale, width = _a.width, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest, onPageVisibilityChanged = _a.onPageVisibilityChanged;\n    var _b = React__namespace.useState({\n        page: null,\n        pageHeight: height,\n        pageWidth: width,\n        viewportRotation: 0,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var page = pageSize.page, pageHeight = pageSize.pageHeight, pageWidth = pageSize.pageWidth;\n    var prevIsCalculated = React__namespace.useRef(false);\n    var intersectionThreshold = Array(10)\n        .fill(null)\n        .map(function (_, i) { return i / 10; });\n    var scaledWidth = pageWidth * scale;\n    var scaledHeight = pageHeight * scale;\n    var isVertical = Math.abs(rotation) % 180 === 0;\n    var w = isVertical ? scaledWidth : scaledHeight;\n    var h = isVertical ? scaledHeight : scaledWidth;\n    var determinePageSize = function () {\n        if (prevIsCalculated.current) {\n            return;\n        }\n        prevIsCalculated.current = true;\n        getPage(doc, pageIndex).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            setPageSize({\n                page: pdfPage,\n                pageHeight: viewport.height,\n                pageWidth: viewport.width,\n                viewportRotation: viewport.rotation,\n            });\n        });\n    };\n    var visibilityChanged = function (params) {\n        onPageVisibilityChanged(pageIndex, params.isVisible ? params.ratio : -1);\n        if (params.isVisible) {\n            determinePageSize();\n        }\n    };\n    var defaultPageRenderer = function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\n        props.canvasLayer.children,\n        props.textLayer.children,\n        props.annotationLayer.children)); };\n    var renderPageLayer = renderPage || defaultPageRenderer;\n    var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n    var containerRef = useIntersectionObserver({\n        threshold: intersectionThreshold,\n        onVisibilityChanged: visibilityChanged,\n    });\n    React__namespace.useEffect(function () {\n        if (currentPage - NUMBER_OF_OVERSCAN_PAGES <= pageIndex &&\n            pageIndex <= currentPage + NUMBER_OF_OVERSCAN_PAGES) {\n            determinePageSize();\n        }\n    }, [currentPage]);\n    return (React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-core__page-layer\", \"data-testid\": \"core__page-layer-\".concat(pageIndex), style: {\n            height: \"\".concat(h, \"px\"),\n            width: \"\".concat(w, \"px\"),\n        } }, !page ? (React__namespace.createElement(Spinner, null)) : (React__namespace.createElement(React__namespace.Fragment, null,\n        renderPageLayer({\n            annotationLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(AnnotationLayer, { doc: doc, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationNumber, scale: scale, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest })),\n            },\n            canvasLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(CanvasLayer, { height: h, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationNumber, scale: scale, width: w })),\n            },\n            doc: doc,\n            height: h,\n            pageIndex: pageIndex,\n            rotation: rotation,\n            scale: scale,\n            svgLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(SvgLayer, { height: h, page: page, rotation: rotationNumber, scale: scale, width: w })),\n            },\n            textLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(TextLayer, { page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationNumber, scale: scale })),\n            },\n            width: w,\n        }),\n        plugins.map(function (plugin, idx) {\n            return plugin.renderPageLayer ? (React__namespace.createElement(React__namespace.Fragment, { key: idx }, plugin.renderPageLayer({\n                doc: doc,\n                height: h,\n                pageIndex: pageIndex,\n                rotation: rotation,\n                scale: scale,\n                width: w,\n            }))) : (React__namespace.createElement(React__namespace.Fragment, { key: idx }));\n        })))));\n};\n\nvar getFileExt = function (url) {\n    var str = url.split(/\\./).pop();\n    return str ? str.toLowerCase() : '';\n};\n\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\nvar calculateScale = function (container, pageHeight, pageWidth, scale) {\n    switch (scale) {\n        case exports.SpecialZoomLevel.ActualSize:\n            return 1;\n        case exports.SpecialZoomLevel.PageFit:\n            return Math.min((container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth, (container.clientHeight - 2 * PAGE_PADDING) / pageHeight);\n        case exports.SpecialZoomLevel.PageWidth:\n            return (container.clientWidth - SCROLL_BAR_WIDTH) / pageWidth;\n    }\n};\n\nvar Inner = function (_a) {\n    var currentFile = _a.currentFile, defaultScale = _a.defaultScale, doc = _a.doc, initialPage = _a.initialPage, pageSize = _a.pageSize, plugins = _a.plugins, renderPage = _a.renderPage, viewerState = _a.viewerState, onDocumentLoad = _a.onDocumentLoad, onOpenFile = _a.onOpenFile, onPageChange = _a.onPageChange, onZoom = _a.onZoom;\n    var docId = doc.loadingTask.docId;\n    var l10n = React__namespace.useContext(LocalizationContext).l10n;\n    var themeContext = React__namespace.useContext(ThemeContext);\n    var containerRef = React__namespace.useRef(null);\n    var pagesRef = React__namespace.useRef(null);\n    var _b = React__namespace.useState(0), currentPage = _b[0], setCurrentPage = _b[1];\n    var _c = React__namespace.useState(0), rotation = _c[0], setRotation = _c[1];\n    var stateRef = React__namespace.useRef(viewerState);\n    var _d = React__namespace.useState(pageSize.scale), scale = _d[0], setScale = _d[1];\n    var keepSpecialZoomLevelRef = React__namespace.useRef(typeof defaultScale === 'string' ? defaultScale : null);\n    var pagesMapRef = React__namespace.useRef(new Map());\n    var pageIndexes = React__namespace.useMemo(function () {\n        return Array(doc.numPages)\n            .fill(0)\n            .map(function (_, index) { return index; });\n    }, [docId]);\n    React__namespace.useEffect(function () {\n        return function () {\n            pagesMapRef.current.clear();\n        };\n    }, []);\n    var handlePagesResize = function (target) {\n        if (keepSpecialZoomLevelRef.current) {\n            zoom(keepSpecialZoomLevelRef.current);\n        }\n    };\n    useTrackResize({\n        targetRef: pagesRef,\n        onResize: handlePagesResize,\n    });\n    var numPages = doc.numPages;\n    var pageWidth = pageSize.pageWidth, pageHeight = pageSize.pageHeight;\n    var arr = Array(numPages).fill(null);\n    var pageVisibility = arr.map(function () { return 0; });\n    var setViewerState = function (viewerState) {\n        var newState = viewerState;\n        plugins.forEach(function (plugin) {\n            if (plugin.onViewerStateChange) {\n                newState = plugin.onViewerStateChange(newState);\n            }\n        });\n        stateRef.current = newState;\n    };\n    var getPagesContainer = function () { return pagesRef.current; };\n    var getPageElement = function (pageIndex) { return pagesMapRef.current.get(pageIndex) || null; };\n    var getViewerState = function () { return stateRef.current; };\n    var jumpToDestination = function (pageIndex, bottomOffset, leftOffset, scaleTo) {\n        var pagesContainer = pagesRef.current;\n        var currentState = stateRef.current;\n        var targetPageEle = pagesMapRef.current.get(pageIndex);\n        if (!pagesContainer || !currentState || !targetPageEle) {\n            return;\n        }\n        getPage(doc, pageIndex).then(function (page) {\n            var viewport = page.getViewport({ scale: 1 });\n            var top = 0;\n            var bottom = bottomOffset || 0;\n            var left = leftOffset || 0;\n            var updateScale = currentState.scale;\n            switch (scaleTo) {\n                case exports.SpecialZoomLevel.PageFit:\n                    top = 0;\n                    left = 0;\n                    zoom(exports.SpecialZoomLevel.PageFit);\n                    break;\n                case exports.SpecialZoomLevel.PageWidth:\n                    updateScale = calculateScale(pagesContainer, pageHeight, pageWidth, exports.SpecialZoomLevel.PageWidth);\n                    top = (viewport.height - bottom) * updateScale;\n                    left = left * updateScale;\n                    zoom(updateScale);\n                    break;\n                default:\n                    var boundingRect = viewport.convertToViewportPoint(left, bottom);\n                    left = Math.max(boundingRect[0] * currentState.scale, 0);\n                    top = Math.max(boundingRect[1] * currentState.scale, 0);\n                    break;\n            }\n            pagesContainer.scrollTop = targetPageEle.offsetTop + top;\n            pagesContainer.scrollLeft = targetPageEle.offsetLeft + left;\n        });\n    };\n    var jumpToPage = function (pageIndex) {\n        if (pageIndex < 0 || pageIndex >= numPages) {\n            return;\n        }\n        var pagesContainer = pagesRef.current;\n        var targetPage = pagesMapRef.current.get(pageIndex);\n        if (pagesContainer && targetPage) {\n            pagesContainer.scrollTop = targetPage.offsetTop;\n            pagesContainer.scrollLeft = targetPage.offsetLeft;\n        }\n        setCurrentPage(pageIndex);\n    };\n    var openFile = function (file) {\n        if (getFileExt(file.name).toLowerCase() !== 'pdf') {\n            return;\n        }\n        new Promise(function (resolve) {\n            var reader = new FileReader();\n            reader.readAsArrayBuffer(file);\n            reader.onload = function () {\n                var bytes = new Uint8Array(reader.result);\n                resolve(bytes);\n            };\n        }).then(function (data) {\n            onOpenFile(file.name, data);\n        });\n    };\n    var rotate = function (updateRotation) {\n        setRotation(updateRotation);\n        setViewerState({\n            file: viewerState.file,\n            pageIndex: currentPage,\n            pageHeight: pageHeight,\n            pageWidth: pageWidth,\n            rotation: updateRotation,\n            scale: scale,\n        });\n    };\n    var zoom = function (newScale) {\n        var pagesEle = pagesRef.current;\n        var updateScale = pagesEle\n            ? typeof newScale === 'string'\n                ? calculateScale(pagesEle, pageHeight, pageWidth, newScale)\n                : newScale\n            : 1;\n        keepSpecialZoomLevelRef.current = typeof newScale === 'string' ? newScale : null;\n        setScale(updateScale);\n        onZoom({ doc: doc, scale: updateScale });\n    };\n    React__namespace.useEffect(function () {\n        var pagesEle = pagesRef.current;\n        var currentState = stateRef.current;\n        if (!pagesEle || !currentState) {\n            return;\n        }\n        pagesEle.scrollTop = (pagesEle.scrollTop * scale) / currentState.scale;\n        pagesEle.scrollLeft = (pagesEle.scrollLeft * scale) / currentState.scale;\n        setViewerState({\n            file: viewerState.file,\n            pageIndex: currentState.pageIndex,\n            pageHeight: pageHeight,\n            pageWidth: pageWidth,\n            rotation: rotation,\n            scale: scale,\n        });\n    }, [scale]);\n    var getPluginMethods = function () { return ({\n        getPageElement: getPageElement,\n        getPagesContainer: getPagesContainer,\n        getViewerState: getViewerState,\n        jumpToDestination: jumpToDestination,\n        jumpToPage: jumpToPage,\n        openFile: openFile,\n        rotate: rotate,\n        setViewerState: setViewerState,\n        zoom: zoom,\n    }); };\n    React__namespace.useEffect(function () {\n        var pluginMethods = getPluginMethods();\n        plugins.forEach(function (plugin) {\n            if (plugin.install) {\n                plugin.install(pluginMethods);\n            }\n        });\n        return function () {\n            plugins.forEach(function (plugin) {\n                if (plugin.uninstall) {\n                    plugin.uninstall(pluginMethods);\n                }\n            });\n        };\n    }, [docId]);\n    React__namespace.useEffect(function () {\n        onDocumentLoad({ doc: doc, file: currentFile });\n        plugins.forEach(function (plugin) {\n            plugin.onDocumentLoad && plugin.onDocumentLoad({ doc: doc, file: currentFile });\n        });\n        if (initialPage) {\n            jumpToPage(initialPage);\n        }\n    }, [docId]);\n    React__namespace.useEffect(function () {\n        onPageChange({ currentPage: currentPage, doc: doc });\n        setViewerState({\n            file: viewerState.file,\n            pageIndex: currentPage,\n            pageHeight: pageHeight,\n            pageWidth: pageWidth,\n            rotation: rotation,\n            scale: scale,\n        });\n    }, [currentPage]);\n    React__namespace.useEffect(function () {\n        return function () {\n            clearPagesCache();\n        };\n    }, []);\n    var pageVisibilityChanged = function (pageIndex, ratio) {\n        pageVisibility[pageIndex] = ratio;\n        var maxRatioPage = pageVisibility.reduce(function (maxIndex, item, index, array) {\n            return item > array[maxIndex] ? index : maxIndex;\n        }, 0);\n        setCurrentPage(maxRatioPage);\n    };\n    var executeNamedAction = function (action) {\n        var previousPage = currentPage - 1;\n        var nextPage = currentPage + 1;\n        switch (action) {\n            case 'FirstPage':\n                jumpToPage(0);\n                break;\n            case 'LastPage':\n                jumpToPage(numPages - 1);\n                break;\n            case 'NextPage':\n                nextPage < numPages && jumpToPage(nextPage);\n                break;\n            case 'PrevPage':\n                previousPage >= 0 && jumpToPage(previousPage);\n                break;\n        }\n    };\n    var pageLabel = (l10n && l10n.core ? l10n.core.pageLabel : 'Page {{pageIndex}}');\n    var renderViewer = function () {\n        var slot = {\n            attrs: {\n                'data-testid': 'core__inner-container',\n                ref: containerRef,\n                style: {\n                    height: '100%',\n                },\n            },\n            children: React__namespace.createElement(React__namespace.Fragment, null),\n            subSlot: {\n                attrs: {\n                    'data-testid': 'core__inner-pages',\n                    ref: pagesRef,\n                    style: {\n                        height: '100%',\n                        overflow: 'auto',\n                        position: 'relative',\n                    },\n                },\n                children: (React__namespace.createElement(React__namespace.Fragment, null, pageIndexes.map(function (index) { return (React__namespace.createElement(\"div\", { \"aria-label\": pageLabel.replace('{{pageIndex}}', \"\".concat(index + 1)), className: \"rpv-core__inner-page\", key: \"pagelayer-\".concat(index), ref: function (ref) {\n                        pagesMapRef.current.set(index, ref);\n                    }, role: \"region\" },\n                    React__namespace.createElement(PageLayer, { currentPage: currentPage, doc: doc, height: pageHeight, pageIndex: index, plugins: plugins, renderPage: renderPage, rotation: rotation, scale: scale, width: pageWidth, onExecuteNamedAction: executeNamedAction, onJumpToDest: jumpToDestination, onPageVisibilityChanged: pageVisibilityChanged }))); }))),\n            },\n        };\n        plugins.forEach(function (plugin) {\n            if (plugin.renderViewer) {\n                slot = plugin.renderViewer({\n                    containerRef: containerRef,\n                    doc: doc,\n                    pageHeight: pageHeight,\n                    pageWidth: pageWidth,\n                    rotation: rotation,\n                    slot: slot,\n                    themeContext: themeContext,\n                    jumpToPage: jumpToPage,\n                    openFile: openFile,\n                    rotate: rotate,\n                    zoom: zoom,\n                });\n            }\n        });\n        return slot;\n    };\n    var renderSlot = function (slot) { return (React__namespace.createElement(\"div\", __assign({}, slot.attrs, { style: slot.attrs && slot.attrs.style ? slot.attrs.style : {} }),\n        slot.children,\n        slot.subSlot && renderSlot(slot.subSlot))); };\n    return renderSlot(renderViewer());\n};\n\nvar LEVELS = [\n    0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.4, 2.7, 3.0, 3.3, 3.7, 4.1, 4.6,\n    5.1, 5.7, 6.3, 7.0, 7.7, 8.5, 9.4, 10,\n];\nvar decrease = function (currentLevel) {\n    var found = LEVELS.findIndex(function (item) { return item >= currentLevel; });\n    return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar RESERVE_WIDTH = 45;\nvar PageSizeCalculator = function (_a) {\n    var defaultScale = _a.defaultScale, doc = _a.doc, render = _a.render;\n    var pagesRef = React__namespace.useRef(null);\n    var _b = React__namespace.useState({\n        pageHeight: 0,\n        pageWidth: 0,\n        scale: 1,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    React__namespace.useLayoutEffect(function () {\n        getPage(doc, 0).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            var w = viewport.width;\n            var h = viewport.height;\n            var pagesEle = pagesRef.current;\n            if (!pagesEle) {\n                return;\n            }\n            var parentEle = pagesEle.parentElement;\n            var scaled = (parentEle.clientWidth - RESERVE_WIDTH) / w;\n            var scale = defaultScale\n                ? typeof defaultScale === 'string'\n                    ? calculateScale(parentEle, h, w, defaultScale)\n                    : defaultScale\n                : decrease(scaled);\n            setPageSize({\n                pageHeight: h,\n                pageWidth: w,\n                scale: scale,\n            });\n        });\n    }, [doc]);\n    var pageWidth = pageSize.pageWidth;\n    return pageWidth === 0 ? (React__namespace.createElement(\"div\", { className: \"rpv-core__page-size-calculator\", ref: pagesRef },\n        React__namespace.createElement(Spinner, null))) : (render(pageSize));\n};\n\nvar LoadingStatus = (function () {\n    function LoadingStatus() {\n    }\n    return LoadingStatus;\n}());\n\nvar SubmitPassword;\n(function (SubmitPassword) {\n    SubmitPassword[SubmitPassword[\"REQUIRE_PASSWORD\"] = 0] = \"REQUIRE_PASSWORD\";\n    SubmitPassword[SubmitPassword[\"WRONG_PASSWORD\"] = 1] = \"WRONG_PASSWORD\";\n})(SubmitPassword || (SubmitPassword = {}));\nvar AskForPasswordState = (function (_super) {\n    __extends(AskForPasswordState, _super);\n    function AskForPasswordState(verifyPassword, submitPassword) {\n        var _this = _super.call(this) || this;\n        _this.verifyPassword = verifyPassword;\n        _this.submitPassword = submitPassword;\n        return _this;\n    }\n    return AskForPasswordState;\n}(LoadingStatus));\n\nvar AskingPassword = function (_a) {\n    var submitPassword = _a.submitPassword, verifyPassword = _a.verifyPassword, onDocumentAskPassword = _a.onDocumentAskPassword;\n    var l10n = React__namespace.useContext(LocalizationContext).l10n;\n    var _b = React__namespace.useState(''), password = _b[0], setPassword = _b[1];\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var submit = function () { return verifyPassword(password); };\n    var handleKeyDown = function (e) {\n        if (e.key === 'Enter') {\n            submit();\n        }\n    };\n    React__namespace.useEffect(function () {\n        if (onDocumentAskPassword) {\n            onDocumentAskPassword({\n                verifyPassword: verifyPassword,\n            });\n        }\n    }, []);\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-wrapper\" },\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__asking-password': true,\n                'rpv-core__asking-password--rtl': isRtl,\n            }) },\n            React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-message\" },\n                submitPassword === SubmitPassword.REQUIRE_PASSWORD &&\n                    l10n.core.askingPassword.requirePasswordToOpen,\n                submitPassword === SubmitPassword.WRONG_PASSWORD && l10n.core.wrongPassword.tryAgain),\n            React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-body\" },\n                React__namespace.createElement(\"div\", { className: classNames({\n                        'rpv-core__asking-password-input': true,\n                        'rpv-core__asking-password-input--ltr': !isRtl,\n                        'rpv-core__asking-password-input--rtl': isRtl,\n                    }) },\n                    React__namespace.createElement(TextBox, { testId: \"core__asking-password-input\", type: \"password\", value: password, onChange: setPassword, onKeyDown: handleKeyDown })),\n                React__namespace.createElement(PrimaryButton, { onClick: submit }, l10n.core.askingPassword.submit)))));\n};\n\nvar CompletedState = (function (_super) {\n    __extends(CompletedState, _super);\n    function CompletedState(doc) {\n        var _this = _super.call(this) || this;\n        _this.doc = doc;\n        return _this;\n    }\n    return CompletedState;\n}(LoadingStatus));\n\nvar FailureState = (function (_super) {\n    __extends(FailureState, _super);\n    function FailureState(error) {\n        var _this = _super.call(this) || this;\n        _this.error = error;\n        return _this;\n    }\n    return FailureState;\n}(LoadingStatus));\n\nvar LoadingState = (function (_super) {\n    __extends(LoadingState, _super);\n    function LoadingState(percentages) {\n        var _this = _super.call(this) || this;\n        _this.percentages = percentages;\n        return _this;\n    }\n    return LoadingState;\n}(LoadingStatus));\n\nvar DocumentLoader = function (_a) {\n    var characterMap = _a.characterMap, file = _a.file, httpHeaders = _a.httpHeaders, render = _a.render, renderError = _a.renderError, renderLoader = _a.renderLoader, transformGetDocumentParams = _a.transformGetDocumentParams, withCredentials = _a.withCredentials, onDocumentAskPassword = _a.onDocumentAskPassword;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var _b = React__namespace.useState(new LoadingState(0)), status = _b[0], setStatus = _b[1];\n    var _c = React__namespace.useState(0), percentages = _c[0], setPercentages = _c[1];\n    var _d = React__namespace.useState(null), loadedDocument = _d[0], setLoadedDocument = _d[1];\n    var isMounted = useIsMounted();\n    React__namespace.useEffect(function () {\n        setStatus(new LoadingState(0));\n        var worker = new PdfJsApi__namespace.PDFWorker({ name: \"PDFWorker_\".concat(Date.now()) });\n        var params = Object.assign({\n            httpHeaders: httpHeaders,\n            withCredentials: withCredentials,\n            worker: worker,\n        }, 'string' === typeof file ? { url: file } : { data: file }, characterMap\n            ? {\n                cMapUrl: characterMap.url,\n                cMapPacked: characterMap.isCompressed,\n            }\n            : {});\n        var transformParams = transformGetDocumentParams ? transformGetDocumentParams(params) : params;\n        var loadingTask = PdfJsApi__namespace.getDocument(transformParams);\n        loadingTask.onPassword = function (verifyPassword, reason) {\n            switch (reason) {\n                case PdfJsApi__namespace.PasswordResponses.NEED_PASSWORD:\n                    isMounted.current &&\n                        setStatus(new AskForPasswordState(verifyPassword, SubmitPassword.REQUIRE_PASSWORD));\n                    break;\n                case PdfJsApi__namespace.PasswordResponses.INCORRECT_PASSWORD:\n                    isMounted.current &&\n                        setStatus(new AskForPasswordState(verifyPassword, SubmitPassword.WRONG_PASSWORD));\n                    break;\n            }\n        };\n        loadingTask.onProgress = function (progress) {\n            progress.total > 0\n                ?\n                    isMounted.current && setPercentages(Math.min(100, (100 * progress.loaded) / progress.total))\n                : isMounted.current && setPercentages(100);\n        };\n        loadingTask.promise.then(function (doc) { return isMounted.current && setLoadedDocument(doc); }, function (err) {\n            return isMounted.current &&\n                !worker.destroyed &&\n                setStatus(new FailureState({\n                    message: err.message || 'Cannot load document',\n                    name: err.name,\n                }));\n        });\n        return function () {\n            loadingTask.destroy();\n            worker.destroy();\n        };\n    }, [file]);\n    React__namespace.useEffect(function () {\n        percentages === 100 && loadedDocument\n            ? isMounted.current && setStatus(new CompletedState(loadedDocument))\n            : isMounted.current && setStatus(new LoadingState(percentages));\n    }, [percentages, loadedDocument]);\n    if (status instanceof AskForPasswordState) {\n        return (React__namespace.createElement(AskingPassword, { submitPassword: status.submitPassword, verifyPassword: status.verifyPassword, onDocumentAskPassword: onDocumentAskPassword }));\n    }\n    if (status instanceof CompletedState) {\n        return render(status.doc);\n    }\n    if (status instanceof FailureState) {\n        return renderError ? (renderError(status.error)) : (React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__doc-error': true,\n                'rpv-core__doc-error--rtl': isRtl,\n            }) },\n            React__namespace.createElement(\"div\", { className: \"rpv-core__doc-error-text\" }, status.error.message)));\n    }\n    if (status instanceof LoadingState) {\n        return (React__namespace.createElement(\"div\", { \"data-testid\": \"core__doc-loading\", className: classNames({\n                'rpv-core__doc-loading': true,\n                'rpv-core__doc-loading--rtl': isRtl,\n            }) }, renderLoader ? renderLoader(status.percentages) : React__namespace.createElement(Spinner, null)));\n    }\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__doc-loading\", \"data-testid\": \"core__doc-loading\" },\n        React__namespace.createElement(Spinner, null)));\n};\n\nvar isDarkMode = function () {\n    return typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n};\n\nvar withTheme = function (theme, onSwitchTheme) {\n    var initialTheme = React__namespace.useMemo(function () { return (theme === 'auto' ? (isDarkMode() ? 'dark' : 'light') : theme); }, []);\n    var _a = React__namespace.useState(initialTheme), currentTheme = _a[0], setCurrentTheme = _a[1];\n    var prevTheme = usePrevious(currentTheme);\n    React__namespace.useEffect(function () {\n        if (theme !== 'auto') {\n            return;\n        }\n        var media = window.matchMedia('(prefers-color-scheme: dark)');\n        var handler = function (e) {\n            setCurrentTheme(e.matches ? 'dark' : 'light');\n        };\n        media.addEventListener('change', handler);\n        return function () { return media.removeEventListener('change', handler); };\n    }, []);\n    React__namespace.useEffect(function () {\n        if (currentTheme !== prevTheme && onSwitchTheme) {\n            onSwitchTheme(currentTheme);\n        }\n    }, [currentTheme]);\n    React__namespace.useEffect(function () {\n        if (theme !== currentTheme) {\n            setCurrentTheme(theme);\n        }\n    }, [theme]);\n    return {\n        currentTheme: currentTheme,\n        setCurrentTheme: setCurrentTheme,\n    };\n};\n\nvar isSameUrl = function (a, b) {\n    var typeA = typeof a;\n    var typeB = typeof b;\n    if (typeA === 'string' && typeB === 'string' && a === b) {\n        return true;\n    }\n    if (typeA === 'object' && typeB === 'object') {\n        return a.length === b.length && a.every(function (v, i) { return v === b[i]; });\n    }\n    return false;\n};\n\nvar Viewer = function (_a) {\n    var characterMap = _a.characterMap, defaultScale = _a.defaultScale, fileUrl = _a.fileUrl, _b = _a.httpHeaders, httpHeaders = _b === void 0 ? {} : _b, _c = _a.initialPage, initialPage = _c === void 0 ? 0 : _c, localization = _a.localization, _d = _a.plugins, plugins = _d === void 0 ? [] : _d, renderError = _a.renderError, renderPage = _a.renderPage, renderLoader = _a.renderLoader, transformGetDocumentParams = _a.transformGetDocumentParams, _e = _a.theme, theme = _e === void 0 ? {\n        direction: exports.TextDirection.LeftToRight,\n        theme: 'light',\n    } : _e, _f = _a.withCredentials, withCredentials = _f === void 0 ? false : _f, onDocumentAskPassword = _a.onDocumentAskPassword, _g = _a.onDocumentLoad, onDocumentLoad = _g === void 0 ? function () {\n    } : _g, _h = _a.onPageChange, onPageChange = _h === void 0 ? function () {\n    } : _h, _j = _a.onSwitchTheme, onSwitchTheme = _j === void 0 ? function () {\n    } : _j, _k = _a.onZoom, onZoom = _k === void 0 ? function () {\n    } : _k;\n    var _l = React__namespace.useState({\n        data: fileUrl,\n        name: typeof fileUrl === 'string' ? fileUrl : '',\n        shouldLoad: false,\n    }), file = _l[0], setFile = _l[1];\n    var openFile = function (fileName, data) {\n        setFile({\n            data: data,\n            name: fileName,\n            shouldLoad: true,\n        });\n    };\n    var _m = React__namespace.useState(false), visible = _m[0], setVisible = _m[1];\n    var prevFile = usePrevious(file);\n    React__namespace.useEffect(function () {\n        if (!isSameUrl(prevFile.data, fileUrl)) {\n            setFile({\n                data: fileUrl,\n                name: typeof fileUrl === 'string' ? fileUrl : '',\n                shouldLoad: visible,\n            });\n        }\n    }, [fileUrl, visible]);\n    var visibilityChanged = function (params) {\n        setVisible(params.isVisible);\n        if (params.isVisible) {\n            setFile(function (currentFile) { return Object.assign({}, currentFile, { shouldLoad: true }); });\n        }\n    };\n    var containerRef = useIntersectionObserver({\n        onVisibilityChanged: visibilityChanged,\n    });\n    var themeProps = typeof theme === 'string' ? { direction: exports.TextDirection.LeftToRight, theme: theme } : theme;\n    var _o = React__namespace.useState(localization || DefaultLocalization), l10n = _o[0], setL10n = _o[1];\n    var localizationContext = { l10n: l10n, setL10n: setL10n };\n    var themeContext = Object.assign({}, { direction: themeProps.direction }, withTheme(themeProps.theme || 'light', onSwitchTheme));\n    React__namespace.useEffect(function () {\n        if (localization) {\n            setL10n(localization);\n        }\n    }, [localization]);\n    return (React__namespace.createElement(LocalizationContext.Provider, { value: localizationContext },\n        React__namespace.createElement(ThemeContext.Provider, { value: themeContext },\n            React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-core__viewer rpv-core__viewer--\".concat(themeContext.currentTheme), \"data-testid\": \"core__viewer\", style: {\n                    height: '100%',\n                    width: '100%',\n                } }, file.shouldLoad && (React__namespace.createElement(DocumentLoader, { characterMap: characterMap, file: file.data, httpHeaders: httpHeaders, render: function (doc) { return (React__namespace.createElement(PageSizeCalculator, { defaultScale: defaultScale, doc: doc, render: function (ps) { return (React__namespace.createElement(Inner, { currentFile: {\n                            data: file.data,\n                            name: file.name,\n                        }, defaultScale: defaultScale, doc: doc, initialPage: initialPage, pageSize: ps, plugins: plugins, renderPage: renderPage, viewerState: {\n                            file: file,\n                            pageIndex: initialPage,\n                            pageHeight: ps.pageHeight,\n                            pageWidth: ps.pageWidth,\n                            rotation: 0,\n                            scale: ps.scale,\n                        }, onDocumentLoad: onDocumentLoad, onOpenFile: openFile, onPageChange: onPageChange, onZoom: onZoom })); } })); }, renderError: renderError, renderLoader: renderLoader, transformGetDocumentParams: transformGetDocumentParams, withCredentials: withCredentials, onDocumentAskPassword: onDocumentAskPassword }))))));\n};\n\nvar Worker = function (_a) {\n    var children = _a.children, workerUrl = _a.workerUrl;\n    PdfJsApi__namespace.GlobalWorkerOptions.workerSrc = workerUrl;\n    return React__namespace.createElement(React__namespace.Fragment, null, children);\n};\n\nvar isMac = function () { return (typeof window !== 'undefined' ? /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform) : false); };\n\nexports.Button = Button;\nexports.Icon = Icon;\nexports.LocalizationContext = LocalizationContext;\nexports.Menu = Menu;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.MinimalButton = MinimalButton;\nexports.Modal = Modal;\nexports.Popover = Popover;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.Separator = Separator;\nexports.Spinner = Spinner;\nexports.Splitter = Splitter;\nexports.TextBox = TextBox;\nexports.ThemeContext = ThemeContext;\nexports.Tooltip = Tooltip;\nexports.Viewer = Viewer;\nexports.Worker = Worker;\nexports.classNames = classNames;\nexports.createStore = createStore;\nexports.getDestination = getDestination;\nexports.getPage = getPage;\nexports.isMac = isMac;\nexports.useIntersectionObserver = useIntersectionObserver;\nexports.useIsMounted = useIsMounted;\nexports.useIsomorphicLayoutEffect = useIsomorphicLayoutEffect;\n"]},"metadata":{},"sourceType":"script"}